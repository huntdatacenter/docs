import{_ as i,c as a,o as t,aM as e}from"./chunks/framework.DAyGILei.js";const c=JSON.parse('{"title":"Tape archive","description":"This page gives the official Cloud tape archive specification.","frontmatter":{"title":"Tape archive","category":"Data","outline":1,"description":"This page gives the official Cloud tape archive specification."},"headers":[],"relativePath":"administer-science/data/tape-archive/index.md","filePath":"administer-science/data/tape-archive/index.md"}'),n={name:"administer-science/data/tape-archive/index.md"};function h(l,s,p,r,d,o){return t(),a("div",null,[...s[0]||(s[0]=[e('<h1 id="tape-archive" tabindex="-1">Tape Archive <a class="header-anchor" href="#tape-archive" aria-label="Permalink to &quot;Tape Archive&quot;">​</a></h1><p>Following guide is meant to help you archive your data using simple bash commands and afterwards send it to us using internal <a href="/administer-science/service-desk/lab-orders#internal-kista">kista</a> where we can collect the data and store it on a long term tape medium.</p><div class="warning custom-block"><p class="custom-block-title">Attention</p><p>This is a pilot service for tape archiving. <a href="https://docs.hdc.ntnu.no/about/contact/" target="_blank" rel="noreferrer">Contact us</a> for further information.</p></div><h3 id="_1-identification-of-data" tabindex="-1">1. Identification of data <a class="header-anchor" href="#_1-identification-of-data" aria-label="Permalink to &quot;1. Identification of data&quot;">​</a></h3><p>1.1 Identify what data you want stored on the tape. Mark down whole directories. Generally, we expect your data to be stored in <code>/mnt/archive</code> directory</p><p>1.2 Do you use symbolic links ? If you are not sure, you can identify symlink directories by first letter in permission string. Letter l stands for a symbolic link. You can also use command below to count your symlinks. If output is other than 0, contact us on slack for further instructions.</p><p>Example:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lrwxrwxrwx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      28</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 21</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 07:59</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test-symbolic-link</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> -</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /path/of/symbolic-link/</span></span></code></pre></div><p>Command:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -lR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt/archive</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ^l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span></span></code></pre></div><h3 id="_2-compress-data-using-tar" tabindex="-1">2. Compress data using tar <a class="header-anchor" href="#_2-compress-data-using-tar" aria-label="Permalink to &quot;2. Compress data using tar&quot;">​</a></h3><p>2.1 Check disk space available with command below.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">df</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span></span></code></pre></div><p>For compression of data we will use tar command and store archive in <strong>/lab/scratch</strong> directory.</p><p>2.2 Create a file_list text file of all files you want to save using below command.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">find</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -L</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt/archive</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -not</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  labname-filelist.txt</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # this will check /mnt/archive directory and list all files.</span></span></code></pre></div><p>Options used: -c: Create an archive. -z: Compress the archive with gzip. -v: Display progress in the terminal while creating the archive, also known as “verbose” mode. (optional) -f: Allows you to specify the filename of the archive. -h: Follow symlinks; archive and dump the files they point to. (optional)</p><p>Examples:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -czvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> single_file.tar.gz</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt/archive/data.dta</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # single file or directory</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -chzvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> archive_symlink.tar.gz</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt/archive</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # includes symbolic links</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -czvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> archive_multiple_dir.tar.gz</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt/archive/test.txt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt/scratch/data.dta</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # compress multiple directories</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -czvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> excluded_files.tar.gz</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt/archive</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --exclude=/mnt/archive/test/data.txt</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --exclude=/mnt/archive/test1/data1.txt</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # excludes specified directories</span></span></code></pre></div><ol start="3"><li>Hash the data</li></ol><p>Once you have compressed your files, you need to create a hash of the files using sha256sum command.</p><p>single hash:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sha256sum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> your_archive.tar.gz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hash_archive.txt</span></span></code></pre></div><ol start="4"><li><p>Upload compressed data, hash file and file_list.txt to <a href="/administer-science/service-desk/lab-orders#internal-kista">kista</a>.</p></li><li><p>Notify us</p></li></ol>',27)])])}const g=i(n,[["render",h]]);export{c as __pageData,g as default};
