import{_ as a,c as i,o as n,aM as t}from"./chunks/framework.DAyGILei.js";const o=JSON.parse('{"title":"CUDA 11.8","description":"Installing Nvidia CUDA toolkit and cuDNN on GPU machines.","frontmatter":{"title":"CUDA 11.8","category":"CUDA","outline":2,"permalink":"/do-science/tools/technical/cuda/cuda-11.8","description":"Installing Nvidia CUDA toolkit and cuDNN on GPU machines."},"headers":[],"relativePath":"do-science/tools/technical/cuda/cuda-11.8.md","filePath":"do-science/tools/technical/cuda/cuda-11.8.md"}'),e={name:"do-science/tools/technical/cuda/cuda-11.8.md"};function l(p,s,h,k,d,c){return n(),i("div",null,[...s[0]||(s[0]=[t(`<h1 id="cuda-installation" tabindex="-1">Cuda installation <a class="header-anchor" href="#cuda-installation" aria-label="Permalink to &quot;Cuda installation&quot;">​</a></h1><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>You don’t need to use <code>sudo</code> to install <strong><a href="https://docs.nvidia.com/cuda/doc/index.html" target="_blank" rel="noreferrer">CUDA Toolkit</a></strong> and <strong><a href="https://docs.nvidia.com/cudnn/index.html" target="_blank" rel="noreferrer">cuDNN</a></strong>.</p></div><h2 id="cuda-11-8" tabindex="-1">CUDA 11.8 <a class="header-anchor" href="#cuda-11-8" aria-label="Permalink to &quot;CUDA 11.8&quot;">​</a></h2><p>In this example we will use <code>\${HOME}/cuda-11.8.0</code> as our installation path.</p><p>Download CUDA runfile installer:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://developer.download.nvidia.com/compute/cuda/11.8.0/local_installers/cuda_11.8.0_520.61.05_linux.run</span></span></code></pre></div><p>Update permissions:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./cuda_11.8.0_520.61.05_linux.run</span></span></code></pre></div><p>Run the installation (takes a few quiet minutes):</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./cuda_11.8.0_520.61.05_linux.run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --silent</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --toolkit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --installpath=\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HOME</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}/cuda-11.8.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --no-opengl-libs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --no-drm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --no-man-page</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Success</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Fail</span></span></code></pre></div><p>Cleanup installation files:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cuda_11.8.0_520.61.05_linux.run</span></span></code></pre></div><h2 id="install-cudnn-for-cuda-11-8" tabindex="-1">Install cuDNN for CUDA 11.8 <a class="header-anchor" href="#install-cudnn-for-cuda-11-8" aria-label="Permalink to &quot;Install cuDNN for CUDA 11.8&quot;">​</a></h2><p>Download <a href="https://docs.nvidia.com/cudnn/index.html" target="_blank" rel="noreferrer">cuDNN</a> package:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://developer.download.nvidia.com/compute/cudnn/redist/cudnn/linux-x86_64/cudnn-linux-x86_64-8.9.7.29_cuda11-archive.tar.xz</span></span></code></pre></div><p>Extract the cuDNN package into our cuda installation:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -xvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cudnn-linux-x86_64-8.9.7.29_cuda11-archive.tar.xz</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --strip-components=1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -C</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> \${HOME}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/cuda-11.8.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Success</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Fail</span></span></code></pre></div><p>After extraction, remove the package:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cudnn-linux-x86_64-8.9.7.29_cuda11-archive.tar.xz</span></span></code></pre></div><h2 id="create-activation-script-for-cuda-11-8" tabindex="-1">Create activation script for CUDA 11.8 <a class="header-anchor" href="#create-activation-script-for-cuda-11-8" aria-label="Permalink to &quot;Create activation script for CUDA 11.8&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>In the activation script have used the CUDA installation directory from our example above (<code>\${HOME}/cuda-11.8.0</code>)</p></div><p>Create activation script by running the code below:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\\EOF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/activate-cuda-11.8.sh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">export CUDA_HOME=\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}/cuda-11.8.0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">export PATH=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$CUDA_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/bin:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$PATH</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">export LD_LIBRARY_PATH=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$CUDA_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/lib64:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$LD_LIBRARY_PATH</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">export LD_LIBRARY_PATH=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$CUDA_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/lib:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$LD_LIBRARY_PATH</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">export LD_LIBRARY_PATH=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$CUDA_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/extras/CUPTI/lib64:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$LD_LIBRARY_PATH</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">export CUDAToolkit_ROOT_DIR=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$CUDA_HOME</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">export CUDAToolkit_ROOT=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$CUDA_HOME</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">export CUDA_TOOLKIT_ROOT_DIR=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$CUDA_HOME</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">export CUDA_TOOLKIT_ROOT=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$CUDA_HOME</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">export CUDA_BIN_PATH=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$CUDA_HOME</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">export CUDA_PATH=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$CUDA_HOME</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">export CUDA_INC_PATH=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$CUDA_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/targets/x86_64-linux</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">export CFLAGS=-I</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$CUDA_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/targets/x86_64-linux/include:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$CFLAGS</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">export CUDAToolkit_TARGET_DIR=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$CUDA_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/targets/x86_64-linux</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span></span></code></pre></div><h2 id="set-environment-variables-for-cuda-11-8" tabindex="-1">Set environment variables for CUDA 11.8 <a class="header-anchor" href="#set-environment-variables-for-cuda-11-8" aria-label="Permalink to &quot;Set environment variables for CUDA 11.8&quot;">​</a></h2><p>From now one you can easily load your cuda variables by running this command:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/activate-cuda-11.8.sh</span></span></code></pre></div><h2 id="test-commands" tabindex="-1">Test commands <a class="header-anchor" href="#test-commands" aria-label="Permalink to &quot;Test commands&quot;">​</a></h2><p>Run test commands to confirm that your installation was successful:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">which</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nvcc</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nvcc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span></span></code></pre></div><p>The expected output:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/home/ubuntu/cuda-11.8.0/bin/nvcc</span></span>
<span class="line"><span></span></span>
<span class="line"><span>nvcc: NVIDIA (R) Cuda compiler driver</span></span>
<span class="line"><span>Copyright (c) 2005-2022 NVIDIA Corporation</span></span>
<span class="line"><span>Built on Wed_Sep_21_10:33:58_PDT_2022</span></span>
<span class="line"><span>Cuda compilation tools, release 11.8, V11.8.89</span></span>
<span class="line"><span>Build cuda_11.8.r11.8/compiler.31833905_0</span></span></code></pre></div>`,31)])])}const F=a(e,[["render",l]]);export{o as __pageData,F as default};
