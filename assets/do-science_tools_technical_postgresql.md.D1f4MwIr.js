import{_ as i,c as a,o as n,aM as e}from"./chunks/framework.DAyGILei.js";const d=JSON.parse('{"title":"PostgreSQL","description":"Connection guide for PostgreSQL.","frontmatter":{"title":"PostgreSQL","category":"Technical tools","permalink":"/do-science/tools/technical/postgresql","outline":1,"description":"Connection guide for PostgreSQL."},"headers":[],"relativePath":"do-science/tools/technical/postgresql.md","filePath":"do-science/tools/technical/postgresql.md"}'),t={name:"do-science/tools/technical/postgresql.md"};function h(l,s,p,o,r,k){return n(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="postgresql" tabindex="-1">PostgreSQL <a class="header-anchor" href="#postgresql" aria-label="Permalink to &quot;PostgreSQL&quot;">​</a></h1><p><strong><a href="https://www.postgresql.org/" target="_blank" rel="noreferrer">PostgreSQL</a> is a relational database management system that can elevate your data handling.</strong></p><nav class="table-of-contents"><ul><li><a href="#set-password">Set password</a></li><li><a href="#connecting-from-workbench">Connecting from Workbench</a></li><li><a href="#connecting-through-pgweb-in-workbench">Connecting through pgweb in Workbench</a></li><li><a href="#installing-psql-client-in-workbench">Installing psql client in Workbench</a></li><li><a href="#installing-python-connectors-in-workbench">Installing Python connectors in Workbench</a></li></ul></nav><div class="warning custom-block"><p class="custom-block-title">Requirement</p><p>This guide is for the managed PostgreSQL pilot service on home machines.</p><p>You can use this guide to connect to your installation if you have requested the setup and received a confirmation that the setup is completed.</p></div><h2 id="set-password" tabindex="-1">Set password <a class="header-anchor" href="#set-password" aria-label="Permalink to &quot;Set password&quot;">​</a></h2><p>First you need to login over ssh and set your password using this command:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">psql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;\\password&quot;</span></span></code></pre></div><h2 id="connecting-from-workbench" tabindex="-1">Connecting from Workbench <a class="header-anchor" href="#connecting-from-workbench" aria-label="Permalink to &quot;Connecting from Workbench&quot;">​</a></h2><p>Once you have configured your password you can also login from <a href="/do-science/hunt-workbench/faq#can-i-use-a-terminal-from-my-workbench">Workbench Terminal</a>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">psql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --host=/var/run/postgresql</span></span></code></pre></div><h2 id="connecting-through-pgweb-in-workbench" tabindex="-1">Connecting through pgweb in Workbench <a class="header-anchor" href="#connecting-through-pgweb-in-workbench" aria-label="Permalink to &quot;Connecting through pgweb in Workbench&quot;">​</a></h2><ul><li>Host: <code>/var/run/postgresql</code></li><li>Port: <code>5432</code></li><li>Username: use your username</li><li>Password: use password configured in the beggining of the guide</li><li>Database: same as username</li></ul><p>Easiest way is to connect with Scheme URL:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>postgresql:///?host=/var/run/postgresql</span></span></code></pre></div><h2 id="installing-psql-client-in-workbench" tabindex="-1">Installing psql client in Workbench <a class="header-anchor" href="#installing-psql-client-in-workbench" aria-label="Permalink to &quot;Installing psql client in Workbench&quot;">​</a></h2><p>You can install <code>psql</code> using conda into default environment:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mamba</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> conda-forge</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> default</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgresql</span></span></code></pre></div><p>Then connect:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">psql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --host=/var/run/postgresql</span></span></code></pre></div><h2 id="installing-python-connectors-in-workbench" tabindex="-1">Installing Python connectors in Workbench <a class="header-anchor" href="#installing-python-connectors-in-workbench" aria-label="Permalink to &quot;Installing Python connectors in Workbench&quot;">​</a></h2><p>You can install <code>psycopg2</code> using conda into <a href="/do-science/hunt-workbench/faq#how-can-i-change-a-conda-environment-for-my-notebook">py310 environment</a>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">conda</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> conda-forge</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> py310</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> psycopg2</span></span></code></pre></div><p>Example of connecting to database named with username:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> psycopg2</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Connecting to dbname=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">os.getenv(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;USER&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> as user=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">os.getenv(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;USER&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">conn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> psycopg2.connect(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;host=/var/run/postgresql dbname=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">os.getenv(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;USER&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">os.getenv(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;USER&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Test connection by listing pg_tables records fron pg_catalog:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> conn:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> conn.cursor() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> curs:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        curs.execute(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;SELECT * FROM pg_catalog.pg_tables;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> table </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> curs.fetchall():</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(table)</span></span></code></pre></div>`,26)])])}const g=i(t,[["render",h]]);export{d as __pageData,g as default};
