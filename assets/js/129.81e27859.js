(window.webpackJsonp=window.webpackJsonp||[]).push([[129],{1150:function(a,t,s){"use strict";s.r(t);var e=s(41),r=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"tape-archive"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tape-archive"}},[a._v("#")]),a._v(" Tape Archive")]),a._v(" "),s("p",[a._v("Following guide is meant to help you archive your data using simple bash commands and afterwards send it to us using internal "),s("RouterLink",{attrs:{to:"/administer-science/service-desk/lab-orders/#internal-kista"}},[a._v("kista")]),a._v(" where we can collect the data and store it on a long term tape medium.")],1),a._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[a._v("Attention")]),a._v(" "),s("p",[a._v("This is a pilot service for tape archiving. "),s("a",{attrs:{href:"https://docs.hdc.ntnu.no/about/contact/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Contact us"),s("OutboundLink")],1),a._v(" for further information.")])]),a._v(" "),s("h3",{attrs:{id:"_1-identification-of-data"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-identification-of-data"}},[a._v("#")]),a._v(" 1. Identification of data")]),a._v(" "),s("p",[a._v("1.1 Identify what data you want stored on the tape. Mark down whole directories. Generally, we expect your data to be stored in "),s("code",[a._v("/mnt/archive")]),a._v(" directory")]),a._v(" "),s("p",[a._v("1.2 Do you use symbolic links ? If you are not sure, you can identify symlink directories by first letter in permission string. Letter l stands for a symbolic link. You can also use command below to count your symlinks. If output is other than 0, contact us on slack for further instructions.")]),a._v(" "),s("p",[a._v("Example:")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("lrwxrwxrwx "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" root    root      "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("28")]),a._v(" Mar "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("21")]),a._v(" 07:59 test-symbolic-link -"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /path/of/symbolic-link/ \n")])])]),s("p",[a._v("Command:")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" -lR /mnt/archive "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" ^l "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("wc")]),a._v(" -l\n")])])]),s("h3",{attrs:{id:"_2-compress-data-using-tar"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-compress-data-using-tar"}},[a._v("#")]),a._v(" 2. Compress data using tar")]),a._v(" "),s("p",[a._v("2.1 Check disk space available with command below.")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("df")]),a._v(" -H\n")])])]),s("p",[a._v("For compression of data we will use tar command and store archive in "),s("strong",[a._v("/lab/scratch")]),a._v(" directory.")]),a._v(" "),s("p",[a._v("2.2 Create a file_list text file of all files you want to save using below command.")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("find")]),a._v(" -L /mnt/archive -not -type d "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("  labname-filelist.txt "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# this will check /mnt/archive directory and list all files.")]),a._v("\n")])])]),s("p",[a._v("Options used:"),s("br"),a._v("\n-c: Create an archive."),s("br"),a._v("\n-z: Compress the archive with gzip."),s("br"),a._v("\n-v: Display progress in the terminal while creating the archive, also known as “verbose” mode. (optional)"),s("br"),a._v("\n-f: Allows you to specify the filename of the archive."),s("br"),a._v("\n-h: Follow symlinks; archive and dump the files they point to. (optional)")]),a._v(" "),s("p",[a._v("Examples:")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" -czvf single_file.tar.gz /mnt/archive/data.dta    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# single file or directory")]),a._v("\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" -chzvf archive_symlink.tar.gz /mnt/archive    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# includes symbolic links")]),a._v("\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" -czvf archive_multiple_dir.tar.gz /mnt/archive/test.txt /mnt/scratch/data.dta  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# compress multiple directories")]),a._v("\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" -czvf excluded_files.tar.gz /mnt/archive --exclude"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/mnt/archive/test/data.txt --exclude"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/mnt/archive/test1/data1.txt "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# excludes specified directories")]),a._v("\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[a._v("Hash the data")])]),a._v(" "),s("p",[a._v("Once you have compressed your files, you need to create a hash of the files using sha256sum command.")]),a._v(" "),s("p",[a._v("single hash:")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("sha256sum your_archive.tar.gz "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" hash_archive.txt\n")])])]),s("ol",{attrs:{start:"4"}},[s("li",[s("p",[a._v("Upload compressed data, hash file and file_list.txt to  "),s("RouterLink",{attrs:{to:"/administer-science/service-desk/lab-orders/#internal-kista"}},[a._v("kista")]),a._v(".")],1)]),a._v(" "),s("li",[s("p",[a._v("Notify us")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);