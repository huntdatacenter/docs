(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{566:function(e,t,n){},859:function(e,t,n){"use strict";n(566)},889:function(e,t,n){"use strict";n.r(t);var l=n(101),a=n(858),o=(n(458),n(10),n(35),n(64),n(201),n(459),n(209),n(449),n(130),n(397),n(213),n(475)),i=n(871),s=n(411),c=n(876),r=n(877),u=n(405),d=n(445),p=n(506),f=n(813),v=n(543),m=n(430),h=n(806),b=n(425),y=n(815),k=n(439),_=n(850),x=n(438),w=n(454),C=n(455),j=n(456),g=n(457),D={name:"ServiceDesk",components:{VApp:o.a,VDialog:i.a,VBtn:s.a,VCol:c.a,VRow:r.a,VTextField:u.a,VTextarea:d.a,VSelect:p.a,VAutocomplete:f.a,VIcon:v.a,VToolbar:m.a,VToolbarTitle:h.b,VCard:b.a,VCardText:y.c,VCardActions:y.a,VSubheader:k.a,VSpacer:_.a,VDivider:x.a,VToolbarItems:h.a,VExpansionPanel:w.a,VExpansionPanels:C.a,VExpansionPanelHeader:j.a,VExpansionPanelContent:g.a},emits:["input"],props:{id:{type:String,default:"applet"},value:{type:Boolean,default:!1},title:{type:String,default:null},fields:{type:Array,default:null},template:{type:Object,default:null},requirements:{type:Array,default:null},recipient:{type:String,default:"cloud.support+hunt-cloud-request@hunt.ntnu.no"},fullscreen:{type:Boolean,default:!1}},data:function(){return{subjectTemplate:null,bodyTemplate:null,formData:{},message:{subject:null,body:null},sendClicked:!1,finalizeClicked:!1,panel:0}},computed:{messageSubject:function(){return this.subjectTemplate?this.wrap(this.subjectTemplate):null},messageBody:function(){return this.bodyTemplate?this.wrap(this.bodyTemplate):null},formFilled:function(){var e=this;return this.fields.every((function(t){return!(!e.formData[t.key]&&!t.optional)}))},encodedSubject:function(){return this.subjectTemplate?this.encode(this.subjectTemplate):null},encodedBody:function(){return this.bodyTemplate?this.encode(this.bodyTemplate):null},encodedRecipient:function(){return this.recipient?this.recipient.replace("+","%2B"):this.recipient},wrapRecipient:function(){return"HUNT Cloud - Service Desk <".concat(this.encodedRecipient,">").replace("<","%3C").replace(">","%3E")},mailto:function(){return"mailto:".concat(this.encodedRecipient,"?subject=").concat(this.encodedSubject,"&body=").concat(this.encodedBody)},deeplinkUrl:function(){return"".concat("https://outlook.office.com/mail/deeplink/compose","?to=").concat(this.wrapRecipient,"&subject=").concat(this.encodedSubject,"&body=").concat(this.encodedBody)}},mounted:function(){},created:function(){this.panel=0,this.subjectTemplate=this.template?this.template.subject:null,this.bodyTemplate=this.template?this.template.body:null;var e,t=[],n=Object(a.a)(this.fields);try{for(n.s();!(e=n.n()).done;){var o=e.value;if(o&&o.key&&(t.push(o.key),o.default)){var i=o.default;this.formData[o.key]=i}}}catch(e){n.e(e)}finally{n.f()}if(this.$route.query)for(var s=0,c=Object.entries(this.$route.query);s<c.length;s++){var r=Object(l.a)(c[s],2),u=r[0],d=r[1];"open"!==u&&t.includes(u)&&(console.log("Prefill from URL: ".concat(u," = ").concat(d)),this.setValue(d,u))}},methods:{close:function(){this.finalizeClicked=!0,this.sendClicked=!0,this.panel=0,this.$emit("input",!1)},closeBtn:function(){this.panel=0,this.$emit("input",!1)},submit:function(){this.panel=2},review:function(){this.finalizeClicked=!0,this.panel=2},actionSend:function(){this.sendClicked=!0,this.panel=3,window.location.href=this.mailto},actionSendOutlook:function(){this.sendClicked=!0,this.panel=3,window.location.href=this.deeplinkUrl},actionSendOutlookPopup:function(){this.sendClicked=!0,this.panel=3,window.open(this.deeplinkUrl,"_blank")},encode:function(e){return e?encodeURIComponent(this.wrap(e)):null},setValue:function(e,t){var n={};n[t]=e?e.trim():e,this.formData=Object.assign({},this.formData,n)},wrap:function(e){for(var t=e,n=0,a=Object.entries(this.formData);n<a.length;n++){var o=Object(l.a)(a[n],2),i=o[0],s=o[1];s&&(t=Array.isArray(s)?t.replaceAll("{".concat(i,"}"),s.join(", ")):t.replaceAll("{".concat(i,"}"),s))}return t=t.replaceAll("\n---\n","\n```  \n")}}},V=(n(859),n(41)),S=Object(V.a)(D,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vuewidget vuewrapper",attrs:{"data-vuetify":""}},[n("v-app",{attrs:{id:e.id}},[n("v-dialog",{attrs:{"hide-overlay":"",transition:"dialog-bottom-transition","max-width":"960px",fullscreen:e.fullscreen},on:{"click:outside":e.closeBtn},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[n("v-card",[n("v-toolbar",{attrs:{dark:"",color:"#00509e"}},[n("v-toolbar-title",[e._v("Service desk - "+e._s(e.title))]),e._v(" "),n("v-spacer"),e._v(" "),n("v-toolbar-items",[n("v-btn",{attrs:{icon:"",fab:""},on:{click:e.closeBtn}},[n("v-icon",[e._v("close")])],1)],1)],1),e._v(" "),n("v-card-text",{staticClass:"pt-6"},[n("v-expansion-panels",{model:{value:e.panel,callback:function(t){e.panel=t},expression:"panel"}},[n("v-expansion-panel",[n("v-expansion-panel-header",{attrs:{"disable-icon-rotate":e.formFilled}},[e._v("\n                Request details\n                ")]),e._v(" "),n("v-expansion-panel-content",{staticClass:"mt-2"},[n("v-row",{attrs:{justify:"center"}},e._l(e.requirements,(function(t){return n("v-col",{key:t.key,staticClass:"pb-0 pt-0",attrs:{cols:"12",dense:""}},[n("p",{staticClass:"mb-2",domProps:{innerHTML:e._s(t)}})])})),1),e._v(" "),n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"6"}},[n("v-btn",{attrs:{color:"success",block:""},on:{click:function(t){e.panel=e.panel+1}}},[e._v("\n                        Continue\n                      ")])],1)],1)],1)],1),e._v(" "),n("v-expansion-panel",[n("v-expansion-panel-header",{attrs:{"disable-icon-rotate":e.formFilled},scopedSlots:e._u([e.formFilled?{key:"actions",fn:function(){return[n("v-icon",{attrs:{color:"teal"}},[e._v("done")])]},proxy:!0}:null],null,!0)},[e._v("\n                Form\n                ")]),e._v(" "),n("v-expansion-panel-content",[n("form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[n("v-row",{attrs:{justify:"center"}},e._l(e.fields,(function(t){return n("v-col",{key:t.key,attrs:{cols:"8"}},["textfield"===t.field?n("v-text-field",{attrs:{autocomplete:"ignore-field",label:t.label,pattern:t.pattern?t.pattern:null,title:t.hint?t.hint:null,hint:t.hint?t.hint:null,suffix:t.suffix?t.suffix:null,autocapitalize:t.autocapitalize?t.autocapitalize:null,"persistent-hint":!(!t.hint||!e.formData[t.key]),placeholder:"","persistent-placeholder":"",outlined:"",dense:"","hide-details":!e.formData[t.key]&&"auto"},on:{focus:function(e){return e.target.select()},change:function(n){return e.setValue(n,t.key)}},model:{value:e.formData[t.key],callback:function(n){e.$set(e.formData,t.key,n)},expression:"formData[item.key]"}}):"selector"===t.field?n("v-select",{attrs:{items:t.options,label:t.label,placeholder:"","persistent-placeholder":"",chips:"",multiple:"",outlined:"","hide-details":""},model:{value:e.formData[t.key],callback:function(n){e.$set(e.formData,t.key,n)},expression:"formData[item.key]"}}):"selectone"===t.field?n("v-select",{attrs:{items:t.options,label:t.label,placeholder:"","persistent-placeholder":"",chips:"",outlined:"","hide-details":""},model:{value:e.formData[t.key],callback:function(n){e.$set(e.formData,t.key,n)},expression:"formData[item.key]"}}):"autocompleteone"===t.field?n("v-autocomplete",{attrs:{items:t.options,label:t.label,placeholder:"","persistent-placeholder":"","small-chips":"",outlined:"",dense:"","clear-icon":"close","hide-details":""},model:{value:e.formData[t.key],callback:function(n){e.$set(e.formData,t.key,n)},expression:"formData[item.key]"}}):e._e(),e._v(" "),"number"===t.field?n("v-text-field",{attrs:{autocomplete:"ignore-field",type:"number",label:t.label,title:t.hint?t.hint:null,hint:t.hint?t.hint:null,suffix:t.suffix?t.suffix:null,min:t.min?t.min:null,max:t.max?t.max:null,step:t.step?t.step:null,"persistent-hint":!(!t.hint||!e.formData[t.key]),placeholder:"","persistent-placeholder":"",outlined:"",dense:"","hide-details":!e.formData[t.key]&&"auto"},on:{focus:function(e){return e.target.select()},change:function(n){return e.setValue(n,t.key)}},model:{value:e.formData[t.key],callback:function(n){e.$set(e.formData,t.key,n)},expression:"formData[item.key]"}}):e._e()],1)})),1),e._v(" "),n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"6"}},[n("v-btn",{attrs:{color:"success",block:"",type:"submit",disabled:!e.formFilled}},[e._v("\n                        Continue\n                      ")])],1)],1)],1)])],1),e._v(" "),n("v-expansion-panel",{attrs:{disabled:!e.formFilled}},[n("v-expansion-panel-header",{attrs:{"disable-icon-rotate":e.sendClicked},scopedSlots:e._u([e.sendClicked?{key:"actions",fn:function(){return[n("v-icon",{attrs:{color:"teal"}},[e._v(" done ")])]},proxy:!0}:null],null,!0)},[e._v("\n                Email request\n                ")]),e._v(" "),n("v-expansion-panel-content",[n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"10"}},[n("v-text-field",{staticClass:"py-2",attrs:{value:e.recipient,label:"Email recipient (TO)",outlined:"",readonly:"",dense:"","hide-details":""},on:{focus:function(e){return e.target.select()}}}),e._v(" "),n("v-text-field",{staticClass:"py-2",attrs:{label:"Email subject",outlined:"",readonly:"",dense:"","hide-details":""},on:{focus:function(e){return e.target.select()}},model:{value:e.messageSubject,callback:function(t){e.messageSubject="string"==typeof t?t.trim():t},expression:"messageSubject"}}),e._v(" "),n("v-textarea",{staticClass:"py-2",attrs:{label:"Body",outlined:"",readonly:"",rows:"13","hide-details":""},on:{focus:function(e){return e.target.select()}},model:{value:e.messageBody,callback:function(t){e.messageBody="string"==typeof t?t.trim():t},expression:"messageBody"}})],1)],1),e._v(" "),n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"4"}},[n("v-btn",{attrs:{color:"success",block:""},on:{click:e.actionSend}},[e._v("\n                      Open in Email Client\n                    ")])],1),e._v(" "),n("v-col",{attrs:{cols:"4"}},[n("v-btn",{attrs:{color:"primary",block:""},on:{click:e.actionSendOutlookPopup}},[e._v("\n                      Open in Outlook Web\n                    ")])],1)],1)],1)],1),e._v(" "),e.sendClicked?n("v-expansion-panel",{attrs:{disabled:!e.formFilled}},[n("v-expansion-panel-header",{attrs:{"disable-icon-rotate":e.finalizeClicked},scopedSlots:e._u([e.finalizeClicked?{key:"actions",fn:function(){return[n("v-icon",{attrs:{color:"teal"}},[e._v(" done ")])]},proxy:!0}:null],null,!0)},[e._v("\n                Finalize request\n                ")]),e._v(" "),n("v-expansion-panel-content",[n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"10"}})],1),e._v(" "),n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"10"}},[n("p",{staticClass:"text-center body-1"},[e._v("\n                      Now your Email client should open and you can follow up\n                      sending Service desk request there.\n                    ")])]),e._v(" "),n("v-col",{attrs:{cols:"10"}},[n("p",{staticClass:"text-center body-1"},[e._v("\n                      In case your "),n("b",[e._v("Email client did not open")]),e._v(" and you want to\n                      send email manually feel free to hit Review button and\n                      copy the message contents and use our service desk email\n                      address.\n                    ")])])],1)],1)],1):e._e()],1)],1),e._v(" "),e.sendClicked?n("v-card-actions",[n("v-row",{staticClass:"mb-2",attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"4"}},[n("v-btn",{attrs:{color:"success",block:"",outlined:""},on:{click:e.review}},[e._v("\n                Review email\n              ")])],1),e._v(" "),n("v-col",{attrs:{cols:"4"}},[n("v-btn",{attrs:{color:"primary",block:"",outlined:""},on:{click:e.actionSendOutlook}},[e._v("\n                Open in Outlook Web\n              ")])],1),e._v(" "),n("v-col",{attrs:{cols:"4"}},[n("v-btn",{attrs:{color:"link",block:""},on:{click:e.close}},[e._v(" Close ")])],1)],1)],1):e._e()],1)],1)],1)],1)}),[],!1,null,null,null);t.default=S.exports}}]);