(window.webpackJsonp=window.webpackJsonp||[]).push([[215],{1265:function(t,s,n){"use strict";n.r(s);var a=n(41),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"postgresql"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#postgresql"}},[t._v("#")]),t._v(" PostgreSQL")]),t._v(" "),n("p",[n("strong",[n("a",{attrs:{href:"https://www.postgresql.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("PostgreSQL"),n("OutboundLink")],1),t._v(" is a relational database management system that can elevate your data handling.")])]),t._v(" "),n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#set-password"}},[t._v("Set password")])]),n("li",[n("a",{attrs:{href:"#connecting-from-workbench"}},[t._v("Connecting from Workbench")])]),n("li",[n("a",{attrs:{href:"#connecting-through-pgweb-in-workbench"}},[t._v("Connecting through pgweb in Workbench")])]),n("li",[n("a",{attrs:{href:"#installing-psql-client-in-workbench"}},[t._v("Installing psql client in Workbench")])]),n("li",[n("a",{attrs:{href:"#installing-python-connectors-in-workbench"}},[t._v("Installing Python connectors in Workbench")])])])]),n("p"),t._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[t._v("Requirement")]),t._v(" "),n("p",[t._v("This guide is for the managed PostgreSQL pilot service on home machines.")]),t._v(" "),n("p",[t._v("You can use this guide to connect to your installation if you have requested the setup and received a confirmation that the setup is completed.")])]),t._v(" "),n("h2",{attrs:{id:"set-password"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#set-password"}},[t._v("#")]),t._v(" Set password")]),t._v(" "),n("p",[t._v("First you need to login over ssh and set your password using this command:")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("psql -c "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\password"')]),t._v("\n")])])]),n("h2",{attrs:{id:"connecting-from-workbench"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#connecting-from-workbench"}},[t._v("#")]),t._v(" Connecting from Workbench")]),t._v(" "),n("p",[t._v("Once you have configured your password you can also login from "),n("RouterLink",{attrs:{to:"/do-science/hunt-workbench/faq/#can-i-use-a-terminal-from-my-workbench"}},[t._v("Workbench Terminal")]),t._v(":")],1),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("psql --host"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/run/postgresql\n")])])]),n("h2",{attrs:{id:"connecting-through-pgweb-in-workbench"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#connecting-through-pgweb-in-workbench"}},[t._v("#")]),t._v(" Connecting through pgweb in Workbench")]),t._v(" "),n("ul",[n("li",[t._v("Host: "),n("code",[t._v("/var/run/postgresql")])]),t._v(" "),n("li",[t._v("Port: "),n("code",[t._v("5432")])]),t._v(" "),n("li",[t._v("Username: use your username")]),t._v(" "),n("li",[t._v("Password: use password configured in the beggining of the guide")]),t._v(" "),n("li",[t._v("Database: same as username")])]),t._v(" "),n("p",[t._v("Easiest way is to connect with Scheme URL:")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("postgresql:///?host=/var/run/postgresql\n")])])]),n("h2",{attrs:{id:"installing-psql-client-in-workbench"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#installing-psql-client-in-workbench"}},[t._v("#")]),t._v(" Installing psql client in Workbench")]),t._v(" "),n("p",[t._v("You can install "),n("code",[t._v("psql")]),t._v(" using conda into default environment:")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("mamba "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -c conda-forge -n default -y postgresql\n")])])]),n("p",[t._v("Then connect:")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("psql --host"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/run/postgresql\n")])])]),n("h2",{attrs:{id:"installing-python-connectors-in-workbench"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#installing-python-connectors-in-workbench"}},[t._v("#")]),t._v(" Installing Python connectors in Workbench")]),t._v(" "),n("p",[t._v("You can install "),n("code",[t._v("psycopg2")]),t._v(" using conda into "),n("RouterLink",{attrs:{to:"/do-science/hunt-workbench/faq/#how-can-i-change-a-conda-environment-for-my-notebook"}},[t._v("py310 environment")]),t._v(":")],1),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("conda "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -c conda-forge -n py310 psycopg2\n")])])]),n("p",[t._v("Example of connecting to database named with username:")]),t._v(" "),n("div",{staticClass:"language-python extra-class"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" os\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" psycopg2\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string-interpolation"}},[n("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"Connecting to dbname=')]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("os"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getenv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'USER'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v(" as user=")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("os"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getenv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'USER'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconn "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" psycopg2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("connect"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string-interpolation"}},[n("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"host=/var/run/postgresql dbname=')]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("os"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getenv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'USER'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v(" user=")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("os"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getenv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'USER'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("Test connection by listing pg_tables records fron pg_catalog:")]),t._v(" "),n("div",{staticClass:"language-python extra-class"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" conn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" conn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cursor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" curs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        curs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("execute"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'SELECT * FROM pg_catalog.pg_tables;'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" table "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" curs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fetchall"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("table"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);