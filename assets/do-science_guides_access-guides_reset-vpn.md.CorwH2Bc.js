import{_ as o,a as t,b as i,c as n,d as a,e as s,f as r,g as l,h as c,i as p}from"./chunks/2.OpenVPN-guide.CaNpl8ML.js";import{_ as d,c as h,o as u,aM as m}from"./chunks/framework.DAyGILei.js";const g="/assets/VPNemovalstep1.B0BCdJkX.png",f="/assets/credentialsremovalpart1.ClRi4kLh.png",k="/assets/configremovalpart2.CxfCAUWi.png",y="/assets/Configurations.CP0-DFSk.png",x=JSON.parse('{"title":"VPN certificate reset","description":"This guide describe how to reset your VPN certificate for HUNT Cloud.","frontmatter":{"title":"VPN certificate reset","category":"Guides","permalink":"/do-science/guides/vpn-certificate-reset","outline":1,"description":"This guide describe how to reset your VPN certificate for HUNT Cloud."},"headers":[],"relativePath":"do-science/guides/access-guides/reset-vpn.md","filePath":"do-science/guides/access-guides/reset-vpn.md"}'),v={name:"do-science/guides/access-guides/reset-vpn.md"};function b(w,e,P,N,q,V){return u(),h("div",null,[...e[0]||(e[0]=[m('<h1 id="vpn-certificate-reset" tabindex="-1">VPN certificate reset <a class="header-anchor" href="#vpn-certificate-reset" aria-label="Permalink to &quot;VPN certificate reset&quot;">​</a></h1><p><strong>This guide describes how to reset your VPN certificate and passphrase required to access your lab when you receive your shipments from the <a href="/do-science/service-desk/#vpn-certificate-reset">VPN certificate reset</a> order.</strong></p><nav class="table-of-contents"><ul><li><a href="#_1-requirements">1. Requirements</a></li><li><a href="#_2-download-and-unpack-your-new-certificate">2. Download and unpack your new certificate</a></li><li><a href="#_3-remove-your-old-vpn-certificate">3. Remove your old VPN certificate</a></li><li><a href="#_4-setup-the-new-vpn-profile">4. Setup the new VPN profile</a></li><li><a href="#_5-connect-to-the-vpn">5. Connect to the VPN</a></li><li><a href="#_6-verify-your-vpn-connection">6. Verify your VPN connection</a></li><li><a href="#troubleshooting">Troubleshooting</a><ul><li><a href="#authenticate-vpn">Authenticate VPN</a></li><li><a href="#vpn-connection-failed">VPN connection failed</a></li><li><a href="#could-not-read-private-key-error">Could not read Private Key error</a></li><li><a href="#unable-to-apply-changes">Unable to apply changes</a></li><li><a href="#tunnelblick-does-not-respond">Tunnelblick does not respond</a></li></ul></li></ul></nav><h2 id="_1-requirements" tabindex="-1">1. Requirements <a class="header-anchor" href="#_1-requirements" aria-label="Permalink to &quot;1. Requirements&quot;">​</a></h2><div class="warning custom-block"><p class="custom-block-title">Shipments from the VPN certificate reset order</p><p>1.1 Your new VPN certificate and VPN profile in a compressed <code>7z</code>-file sent over filesender.no</p><p>1.2. Your new <code>VPN passphrase</code> and your <code>7-ZIP file key</code> sent over Signal.</p></div><p><strong>Required software</strong>. The following required software should already be installed during your initial onboarding:</p><p>1.3. Working VPN software (if not, head over to our Getting started guide to <a href="/do-science/lab/#_2-1-install-the-vpn-software">install the VPN software</a>.</p><p>1.4. A working Google authenticator application on your phone that provide time-based VPN verification codes (if not, you can order a <a href="/do-science/service-desk/#google-authenticator-key-reset">Google authenticator key reset</a> in our service desk).</p><h2 id="_2-download-and-unpack-your-new-certificate" tabindex="-1">2. Download and unpack your new certificate <a class="header-anchor" href="#_2-download-and-unpack-your-new-certificate" aria-label="Permalink to &quot;2. Download and unpack your new certificate&quot;">​</a></h2><p>We will communicate your VPN certificate over your organizational email. You will receive a link to an encrypted file archive (7z-file).</p><p>::: expander &quot;Windows&quot; id=&quot;2-windows&quot;</p><p>2.1 Click on the link in the email to download the file and save this on your local computer.</p><p>2.2 Unpack (extract) the file using <a href="https://www.7-zip.org/download.html" target="_blank" rel="noreferrer">7-zip</a></p><p>2.3 Use the key named <strong><code>7-ZIP file key</code></strong> from your Signal transfer to decrypt the archive folder.</p><p>:::</p><p>::: expander &quot;MacOS&quot; id=&quot;2-macos&quot;</p><p>2.1 Click on the link in the email to download the file and save this on your local computer.</p><p>2.2 Unpack (extract) the file with compatible archive software</p><p>We recommend downloading <a href="https://www.keka.io/en/download" target="_blank" rel="noreferrer">Keka</a> to successfully unpack your archive folder</p><p>alternatively, you can install keka using brew command below</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">brew</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> keka</span></span></code></pre></div><p>2.3 Use the key named <strong><code>7-ZIP file key</code></strong> from your Signal transfer to decrypt the archive folder.</p><p>:::</p><div class="danger custom-block"><p class="custom-block-title">OS X and MacOS - Passphrase not working?</p><p>Note that the default archive utility on MacOS does not recognize the passphrase of the 7z files. You will need to install the 7z-compatible software from the link above.</p></div><p>::: expander &quot;Ubuntu linux&quot; id=&quot;2-linux&quot;</p><p>2.1 Click on the link in the email to download the file and save this on your local computer.</p><p>2.2 Unpack (extract) the file with compatible archive software</p><p>install p7zip</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> p7zip-full</span></span></code></pre></div><p>2.3 Use the key named <strong><code>7-ZIP file key</code></strong> from your Signal transfer to decrypt the archive folder.</p><p>:::</p><h2 id="_3-remove-your-old-vpn-certificate" tabindex="-1">3. Remove your old VPN certificate <a class="header-anchor" href="#_3-remove-your-old-vpn-certificate" aria-label="Permalink to &quot;3. Remove your old VPN certificate&quot;">​</a></h2><p>You will need to remove your old VPN certificate and passwords before you install a new one.</p><p>::: expander &quot;Windows&quot; id=&quot;3-windows&quot;</p><ol><li>Right click on the OpenVPN icon in the task bar in the lower right corner of your screen and select <strong><code>Clear Saved Passwords</code></strong></li><li>Open your file explorer and manually remove the folder with the old OpenVPN configurations. It&#39;s usually located here:</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>C:\\Users\\&lt;MYUSERNAME&gt;\\OpenVPN\\config\\&lt;folder-with-username-that-you-should-remove&gt;</span></span></code></pre></div><p>:::</p><p>::: expander &quot;MacOS&quot; id=&quot;3-macos&quot;</p><p>To remove old VPN configuration on MacOS using Tunnelblick, follow our guide below</p><ol><li>Click on running Tunnelblick icon in upper menu bar and select <code>VPN details...</code></li></ol><p><img src="'+g+'" alt="VPNemovalstep1.png"></p><ol start="2"><li>Select your VPN profile on the left side of the window. Then, in the bottom left corner, select expansion window marked with 3 dots in a circle</li></ol><p><img src="'+f+'" alt="credentialsremoval1"></p><ol start="3"><li>At the very bottom of the newly opened widow, select <code>Delete configuration&#39;s credentials in keychain</code></li></ol><p><img src="'+k+'" alt="credentialsremoval2"></p><ol start="4"><li>Afterwards, select your VPN profile and delete it from Tunnelblick app as described on below picture</li></ol><p><img src="'+y+'" alt="profileremoval"></p><ol start="5"><li>You can now continue with next step</li></ol><p>:::</p><h2 id="_4-setup-the-new-vpn-profile" tabindex="-1">4. Setup the new VPN profile <a class="header-anchor" href="#_4-setup-the-new-vpn-profile" aria-label="Permalink to &quot;4. Setup the new VPN profile&quot;">​</a></h2><p>::: expander &quot;Windows&quot; id=&quot;4-windows&quot;</p><ol><li>Start the OpenVPN client (if it is not running already)</li></ol><p><img src="'+o+'" alt="OpenVPN-icon"></p><ol start="2"><li>Expand pane on taskbar</li></ol><p><img src="'+t+'" alt="OpenVPN-icon"></p><ol start="3"><li>Select <strong><code>Import file...</code></strong></li></ol><p><img src="'+i+'" alt="OpenVPN-icon"></p><ol start="4"><li>Click on Import file and select OpenVPN profile file <strong><code>&lt;username&gt;.ovpn</code></strong> that you collected in Step 1.</li></ol><p><img src="'+n+'" alt="OpenVPN-icon"></p><p><img src="'+a+'" alt="OpenVPN-icon"></p><p>:::</p><p>::: expander &quot;MacOS&quot; id=&quot;4-macos&quot;</p><p><strong>4.1 If you &#39;do&#39; get prompted with the <code>Welcome to Tunnelblick</code> message, follow these steps:</strong></p><ol><li>Select <strong><code>I have configuration files</code></strong>.</li><li>In the <strong><code>Welcome to Tunnelblick</code></strong> prompt, select <strong><code>I have configuration files</code></strong>.</li><li>When prompted for which type of configuration you have, select <strong><code>OpenVPN Configurations</code></strong>.</li><li>Select the OpenVPN profile named. <strong><code>&lt;username&gt;.ovpn</code></strong> in the collection of credentials given from HUNT Cloud.</li><li>Continue with the <strong><code>Connecting to the VPN section</code></strong> below.</li></ol><p><strong>4.2 If you &#39;do not&#39; get prompted with the <code>Welcome to Tunnelblick</code> message, follow these steps:</strong></p><ol><li>Find the OpenVPN profile named <strong><code>&lt;username&gt;.ovpn</code></strong> that you collected in Step 1.</li><li>Right-click the file OpenVPN profile named <strong><code>&lt;username&gt;.ovpn</code></strong>.</li><li>Select <strong><code>Open With -&gt; Tunnelblick</code></strong>.</li><li>When prompted for <strong><code>Install Configuration For All Users</code></strong>, select <strong><code>Only Me</code></strong>.</li><li>Enter your macOS password to allow Tunnelblick to install the OpenVPN configuration.</li><li>Continue with the <strong><code>Connecting to the VPN section</code></strong> below.</li></ol><p>:::</p><p>::: expander &quot;Ubuntu linux&quot; id=&quot;4-linux&quot;</p><ol><li>Click on the <em>Network Manager</em> icon in the task bar.</li><li>Select <em>Edit Connections...</em>.</li><li>Click <em>Add</em>.</li><li>Choose <em>Import a saved VPN configuration</em> and click <em>Create</em>.</li><li>Select the OpenVPN profile named <strong><code>&lt;username&gt;.ovpn</code></strong> that you collected in Step 1.</li><li>Enter your user name (same as the OpenVPN profile file name).</li><li>Click on the person icon in the <em>Password</em> field and select <strong><code>Ask for this password every time</code></strong>.</li><li>Enter the <em>Private Key Password</em> with the <strong><code>VPN passphrase</code></strong> sent to you from HUNT over Signal.</li><li>Click on the <em>IPv4 Settings</em> tab.</li><li>Click <em>Routes...</em>.</li><li>Select the <em>Use this connection only for resources on its network</em> and click <em>OK</em>.</li><li>Click <em>Apply</em>.</li></ol><p>:::</p><h2 id="_5-connect-to-the-vpn" tabindex="-1">5. Connect to the VPN <a class="header-anchor" href="#_5-connect-to-the-vpn" aria-label="Permalink to &quot;5. Connect to the VPN&quot;">​</a></h2><p>::: expander &quot;Windows&quot; id=&quot;5-windows&quot;</p><ol><li><p>Right-click on the OpenVPN notification icon on the taskbar.</p></li><li><p>Select <em>Connect</em>.</p></li></ol><p><img src="'+s+'" alt="OpenVPN-icon"></p><ol start="3"><li><p>Enter your user name (same as the OpenVPN profile file name).</p></li><li><p>Enter a rotating <strong><code>verification code</code></strong> from Google Authenticator as your password.</p><p><img src="'+r+'" alt="OpenVPN-icon"></p></li><li><p>When prompted for a <em>Private Key Password</em>, insert the <strong><code>VPN passphrase</code></strong> that your collected in Step 1. Your authentication will fail when you complete your passphrase below. This is expected since your verification code timed out while you typed your passphrase.</p><p><img src="'+l+'" alt="OpenVPN-icon"></p></li><li><p>Now try again to connect with a fresh <strong><code>verfication code</code></strong> from Google Authenticator.</p></li></ol><p>You should now be connected to the VPN.</p><p>:::</p><p>::: expander &quot;macOS&quot; id=&quot;5-macos&quot;</p><ol><li><p>Start Tunnelblick and <strong><code>Connect</code></strong>.</p></li><li><p>Enter your user name (same as the OpenVPN profile file name).</p></li><li><p>Enter the <strong><code>verification code</code></strong> from Google Authenticator as your password.</p><p><img src="'+c+'" alt="tunnelblick-login"></p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Make sure that the <em>Save password</em> checkbox is <strong><code>unchecked</code></strong>.</p></div></li><li><p>When prompted for a <em>Private Key Password</em> or <em>Passphrase</em>, insert the <strong><code>VPN passphrase</code></strong> that you collected in Step 1.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Save this passphrase.</p></div></li></ol><p>Your authentication will fail when you complete your passphrase above. This is expected since your verification code timed out while you typed your passphrase.</p><ol start="6"><li>Now try again to connect with a fresh <strong><code>verfication code</code></strong> from Google Authenticator.</li></ol><p>You should now be connected to the VPN.</p><p>:::</p><p>::: expander &quot;Ubuntu Linux&quot; id=&quot;5-linux&quot;</p><ol><li>Click on the <em>Network Manager</em> icon in the task bar.</li><li>Select <em>VPN Connections &gt;</em> and the name of your profile.</li><li>In the <em>Authenticate VPN</em> window, enter the <strong><code>verification code</code></strong> from Google Authenticator in the <em>Password</em> field.</li><li>Click <em>OK</em> to connect.</li></ol><p>:::</p><h2 id="_6-verify-your-vpn-connection" tabindex="-1">6. Verify your VPN connection <a class="header-anchor" href="#_6-verify-your-vpn-connection" aria-label="Permalink to &quot;6. Verify your VPN connection&quot;">​</a></h2><p>::: expander &quot;Windows&quot; id=&quot;6-windows&quot;</p><p>The OpenVPN notification icon on the taskbar should be green.</p><p><img src="'+p+'" alt="OpenVPN-icon"></p><p>:::</p><p>::: expander &quot;MacOS&quot; id=&quot;6-macos&quot;</p><p>A small Tunnelblick window should state &quot;Connected&quot; in green letters with a timer that count the connection length.</p><p>:::</p><p>::: expander &quot;Ubuntu Linux&quot; id=&quot;6-linux&quot;</p><p>If you received the notification <em>VPN connection has been successfully established</em>, then you are good to go.</p><p>:::</p><div class="danger custom-block"><p class="custom-block-title">Access list</p><p>We allow connection from known IP addresses only. This means that your VPN connection may be blocked if you connect from a (for us) unknown network outside Norway. <a href="/do-science/service-desk/#vpn-access-list">Click here</a> to request an opening for your location in our Do science service desk.</p></div><div class="tip custom-block"><p class="custom-block-title">Next step</p><p>If you successfully completed this step, head over to Step 3 to <a href="/do-science/lab/">Configure your SSH</a> connection. If you did not succeed, start with a quick look in our Immediate troubleshooting section below.</p></div><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><p>Below are a few immediate things to try if your VPN connection did not succeed:</p><h3 id="authenticate-vpn" tabindex="-1">Authenticate VPN <a class="header-anchor" href="#authenticate-vpn" aria-label="Permalink to &quot;Authenticate VPN&quot;">​</a></h3><p>If the <em>Authenticate VPN</em> prompt pops up again, then try to log in again with a new <strong><code>verification code</code></strong>.</p><h3 id="vpn-connection-failed" tabindex="-1">VPN connection failed <a class="header-anchor" href="#vpn-connection-failed" aria-label="Permalink to &quot;VPN connection failed&quot;">​</a></h3><p>If you received the notification <em>VPN Connection Failed</em> after 60 seconds, please check the following</p><ul><li>Verify that you have an active internet connection.</li><li>Verify that the <em>Private Key Password</em> is correct.</li></ul><h3 id="could-not-read-private-key-error" tabindex="-1">Could not read Private Key error <a class="header-anchor" href="#could-not-read-private-key-error" aria-label="Permalink to &quot;Could not read Private Key error&quot;">​</a></h3><p>The error messages below indicates that there is a typo in the <em>Private Key Password</em> (step 2.3.5) and you need to type it in again.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ERROR: could not read Private Key username/password/ok/string from management interface</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Cannot load private key file</span></span></code></pre></div><h3 id="unable-to-apply-changes" tabindex="-1">Unable to apply changes <a class="header-anchor" href="#unable-to-apply-changes" aria-label="Permalink to &quot;Unable to apply changes&quot;">​</a></h3><p>If you are unable to click <em>Apply</em> after your changes, try to re-enter your <em>Private Key Password</em> using your <strong><code>VPN passphrase</code></strong> that you collected in Step 1.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>If nothing works, please head over to our main <a href="/do-science/troubleshooting/connection#vpn">troubleshooting</a> section for more information on how to troubleshoot connections.</p></div><h3 id="tunnelblick-does-not-respond" tabindex="-1">Tunnelblick does not respond <a class="header-anchor" href="#tunnelblick-does-not-respond" aria-label="Permalink to &quot;Tunnelblick does not respond&quot;">​</a></h3><p>If Tunnelblick stopped responding, you can try following command in your terminal to stop Tunnelblick app</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pkill</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -9</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Tunnelblick|openvpn&#39;</span></span></code></pre></div>',116)])])}const S=d(v,[["render",b]]);export{x as __pageData,S as default};
