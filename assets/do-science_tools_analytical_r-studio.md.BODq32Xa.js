import{_ as i,c as a,o as e,aM as n}from"./chunks/framework.DAyGILei.js";const c=JSON.parse('{"title":"R and R-Studio","description":"Installation guide for R and R-Studio","frontmatter":{"title":"R and R-Studio","category":"Analytical tools","permalink":"/do-science/tools/analytical/r-studio","outline":2,"description":"Installation guide for R and R-Studio"},"headers":[],"relativePath":"do-science/tools/analytical/r-studio.md","filePath":"do-science/tools/analytical/r-studio.md"}'),t={name:"do-science/tools/analytical/r-studio.md"};function l(h,s,p,o,r,k){return e(),a("div",null,[...s[0]||(s[0]=[n(`<h1 id="r" tabindex="-1">R <a class="header-anchor" href="#r" aria-label="Permalink to &quot;R&quot;">​</a></h1><p><a href="https://www.r-project.org/" target="_blank" rel="noreferrer">R</a> is a handy language and environment for statistical computing and graphics. We have already installed the latest version on your home machines. For those of you running unmanaged machines on our security tier 2 may want to upgrade to the latest version using the code below:</p><nav class="table-of-contents"><ul><li><a href="#install-r">Install R</a><ul><li><a href="#install-using-conda">Install using Conda</a></li><li><a href="#install-using-system-packages">Install using system packages</a></li><li><a href="#upgrade-to-latest-r-version-4-0">Upgrade to latest R version (4.0)</a></li><li><a href="#downgrade-to-a-specific-r-version-iaas-machines">Downgrade to a specific R version (IAAS machines)</a></li></ul></li><li><a href="#install-r-studio">Install R Studio</a><ul><li><a href="#download-the-latest-software-version">Download the latest software version</a></li><li><a href="#configure-x2go">Configure X2Go</a></li></ul></li><li><a href="#troubleshooting">Troubleshooting</a><ul><li><a href="#i-cannot-create-r-tempdir">I cannot create R_TempDir</a></li><li><a href="#installation-of-devtools">Installation of devtools</a></li><li><a href="#rstudio-do-not-recognize-the-latest-r-version">RStudio do not recognize the latest R-version</a></li><li><a href="#predictabel-matplotlib-viridis-or-plyr-fails-to-import">PredictABEL, matplotlib, viridis, or plyr fails to import</a></li><li><a href="#rstudio-or-r-becomes-unresponsive-when-i-run-my-code">RStudio or R becomes unresponsive when I run my code</a></li></ul></li></ul></nav><h2 id="install-r" tabindex="-1">Install R <a class="header-anchor" href="#install-r" aria-label="Permalink to &quot;Install R&quot;">​</a></h2><h3 id="install-using-conda" tabindex="-1">Install using Conda <a class="header-anchor" href="#install-using-conda" aria-label="Permalink to &quot;Install using Conda&quot;">​</a></h3><p>We recommend using <a href="/do-science/tools/analytical/conda">Conda</a> to install R packages. Conda gives you better flexibility when choosing versions, which will not affect other researchers in your lab.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>We have very easy guide on how to get <a href="/do-science/tools/analytical/saige">Saige</a> running in Conda environment.</p></div><p>If you have a conda setup based on the guide above you will need some additional channels to install the packages. You will need <a href="https://anaconda.org/bioconda" target="_blank" rel="noreferrer">bioconda</a> and <a href="https://anaconda.org/conda-forge" target="_blank" rel="noreferrer">conda-forge</a> channels. If you have not set channels yet make sure to add them in the same order, but feel free to skip bioconda if you do not see a need for it:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">conda</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> channels</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bioconda</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">conda</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> channels</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> conda-forge</span></span></code></pre></div><p>To install R (&gt;=4.0.3) you have to install r-base package. In the example below we create an environment where r-base is being installed as default with devtools:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">conda</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> renv</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --channel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> conda-forge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;r-base&gt;=4.0.3&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> r-devtools</span></span></code></pre></div><p>To be able to work with R that you just installed you have to activate your conda environment:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">conda</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> activate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> renv</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">R</span></span></code></pre></div><p>Additional R packages can be found in channels or installed using R devtools. We highly recommend to use R packages from Conda channels <a href="https://anaconda.org/bioconda" target="_blank" rel="noreferrer">bioconda</a> and <a href="https://anaconda.org/conda-forge" target="_blank" rel="noreferrer">conda-forge</a>. Conda packages usually have <code>r-</code> prefix in their names. Here is an example how to install matrix R package into renv environment:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">conda</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> renv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> r-matrix</span></span></code></pre></div><p>If you still decide to install cran packages when using conda, then you should minimize the issues encounted by specifying the library path. For example to install png package:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">install.packages(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;png&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> paste0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Sys.getenv(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;CONDA_PREFIX&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/lib/R/library&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><h4 id="running-multiple-version-of-r" tabindex="-1">Running multiple version of R <a class="header-anchor" href="#running-multiple-version-of-r" aria-label="Permalink to &quot;Running multiple version of R&quot;">​</a></h4><p>To run multiple R versions with conda environments it may be necessary to setup custom <code>~/.Rprofile</code> config. You can use example below as an inspiration for setting your .Rprofile config to link each R version to library paths within environment:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">condaenv</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Sys.getenv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;CONDA_PREFIX&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">condaenv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> !=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  .libPaths(c(paste0(Sys.getenv(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;CONDA_PREFIX&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/lib/R/library&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="install-using-system-packages" tabindex="-1">Install using system packages <a class="header-anchor" href="#install-using-system-packages" aria-label="Permalink to &quot;Install using system packages&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Install R</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> r-base</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> r-base-dev</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Add the updated package repository to your sources list:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># https://cran.r-project.org/bin/linux/ubuntu/</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;deb https://cloud.r-project.org/bin/linux/ubuntu $(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsb_release</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -cs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)-cran35/&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/etc/apt/sources.list.d/$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsb_release</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -cs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)-cran35.list&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Add keys for the CRAN repository</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gpg</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --keyserver</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hkp://keyserver.ubuntu.com:80</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --recv-keys</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> E298A3A825C0D65DFD57CBB651716619E084DAB9</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gpg</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --export</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> E298A3A825C0D65DFD57CBB651716619E084DAB9</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Update packages</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> upgrade</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> autoremove</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Start R</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">R</span></span></code></pre></div><h3 id="upgrade-to-latest-r-version-4-0" tabindex="-1">Upgrade to latest R version (4.0) <a class="header-anchor" href="#upgrade-to-latest-r-version-4-0" aria-label="Permalink to &quot;Upgrade to latest R version (4.0)&quot;">​</a></h3><p>The default version in Ubuntu is usually a few versions behind the newest R version available. Follow the code below if you need the newest version.</p><div class="warning custom-block"><p class="custom-block-title">Please note</p><p>Running upgrade affects versions of all packages on your machine. This may break your or others environments. We recommend installing new R version using <a href="/do-science/tools/analytical/r-studio#install-using-conda">Conda</a> instead.</p></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -- Add the new package repository to your sources list:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;deb https://cloud.r-project.org/bin/linux/ubuntu $(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsb_release</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -cs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)-cran40/&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/etc/apt/sources.list.d/$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsb_release</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -cs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)-cran40.list&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Add keys for the r-project repository</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gpg</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --keyserver</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hkp://keyserver.ubuntu.com:80</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --recv-keys</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> E298A3A825C0D65DFD57CBB651716619E084DAB9</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gpg</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --export</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> E298A3A825C0D65DFD57CBB651716619E084DAB9</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -- Update packages</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> upgrade</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> r-base</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> autoremove</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -- Start R</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">R</span></span></code></pre></div><h3 id="downgrade-to-a-specific-r-version-iaas-machines" tabindex="-1">Downgrade to a specific R version (IAAS machines) <a class="header-anchor" href="#downgrade-to-a-specific-r-version-iaas-machines" aria-label="Permalink to &quot;Downgrade to a specific R version (IAAS machines)&quot;">​</a></h3><p>Sometimes you may want to pin your R version to a specific release to please specific packages required for your work. Below are a guide on how to downgrade and pin your R version to a specific release (just in case your figured out the need <em>after</em> you upgraded R to a new version...). The guide is copied from this great <a href="https://askubuntu.com/questions/1056630/r-3-5-0-not-working-on-ubuntu-18-04/1057231#1057231" target="_blank" rel="noreferrer">forum post</a>.</p><div class="warning custom-block"><p class="custom-block-title">Please note</p><p>This setup below will only work on IAAS- or BLUE-machines as they require administrator privileges. Contact us if you need to downgrade the R version on your home machine.</p></div><h4 id="save-the-r-packages-that-is-already-installed-in-your-lab" tabindex="-1">Save the R-packages that is already installed in your lab <a class="header-anchor" href="#save-the-r-packages-that-is-already-installed-in-your-lab" aria-label="Permalink to &quot;Save the R-packages that is already installed in your lab&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dpkg</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;^ii  r-&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> r_packages.txt</span></span></code></pre></div><h4 id="pin-the-software-version-to-a-specific-version-in-this-case-r-3-5" tabindex="-1">Pin the software version to a specific version (in this case R 3.5) <a class="header-anchor" href="#pin-the-software-version-to-a-specific-version-in-this-case-r-3-5" aria-label="Permalink to &quot;Pin the software version to a specific version (in this case R 3.5)&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/apt/preferences.d/pin-r35</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Package: r-*</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Pin: release a=$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsb_release</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -cs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)-cran35</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Pin: version 3.5*</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Pin-Priority: 800</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Package: r-cran-nlme</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Pin: release a=$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsb_release</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -cs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)-cran35</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Pin: version 3.1.139-1$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsb_release</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -cs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)0</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Pin-Priority: 800</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span></span></code></pre></div><h4 id="purge-and-remove-the-current-r-version" tabindex="-1">Purge and remove the current R version <a class="header-anchor" href="#purge-and-remove-the-current-r-version" aria-label="Permalink to &quot;Purge and remove the current R version&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> purge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> r-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> autoremove</span></span></code></pre></div><h4 id="re-install-your-specific-r-version-and-your-r-packages" tabindex="-1">Re-install your specific R version and your r-packages <a class="header-anchor" href="#re-install-your-specific-r-version-and-your-r-packages" aria-label="Permalink to &quot;Re-install your specific R version and your r-packages&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> r_packages.txt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> awk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{print $2}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h4 id="check-that-the-new-correct-version-is-running" tabindex="-1">Check that the new correct version is running <a class="header-anchor" href="#check-that-the-new-correct-version-is-running" aria-label="Permalink to &quot;Check that the new correct version is running&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">R</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">R</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> version</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3.5.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (2019-03-11) -- </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Great Truth&quot;</span></span></code></pre></div><h4 id="optional-remove-the-version-pinning" tabindex="-1">Optional, remove the version pinning <a class="header-anchor" href="#optional-remove-the-version-pinning" aria-label="Permalink to &quot;Optional, remove the version pinning&quot;">​</a></h4><p>Remove your pin-file if you want to revert to the newest version.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/apt/preferences.d/pin-r35</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> upgrade</span></span></code></pre></div><h2 id="install-r-studio" tabindex="-1">Install R Studio <a class="header-anchor" href="#install-r-studio" aria-label="Permalink to &quot;Install R Studio&quot;">​</a></h2><p>We do provide the opportunity for a graphical interface via R Studio. Researchers may install this on unmanaged machines.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Make sure R-Studio is not already installed, if the lab was setup before command will return path.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">which</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rstudio</span></span></code></pre></div></div><div class="warning custom-block"><p class="custom-block-title">Please note</p><p>Installation on home-machines requires us to run some code.</p><p>The below guide will therefore not work on home-machines.</p></div><div class="warning custom-block"><p class="custom-block-title">Dependencies</p><p><code>Without these, it will be impossible to get RStudio to work.</code></p><ul><li>R (installed as above)</li><li>A machine prepared for a <a href="/do-science/tools/technical/x2go">graphical interface (X2Go)</a></li><li>An IAAS-machine or BLUE-machine with administrator access</li></ul></div><h3 id="download-the-latest-software-version" tabindex="-1">Download the latest software version <a class="header-anchor" href="#download-the-latest-software-version" aria-label="Permalink to &quot;Download the latest software version&quot;">​</a></h3><p>Search <a href="https://www.rstudio.com/products/rstudio/download/#download" target="_blank" rel="noreferrer">www.rstudio.com</a> for the latest version in accordance with your operating system (e.g. Ubuntu 18.04 Bionic). The below text is an example code which you may cut and paste into your shell:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># download the package</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://download1.rstudio.org/rstudio-xenial-1.1.463-amd64.deb</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -O</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /tmp/rstudio.deb</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># install essential dependencies</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> libnss3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> libasound2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># install rstudio</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /tmp/rstudio.deb</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># clean up files</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /tmp/rstudio.deb</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">Latest version</p><p>If you plan to install latest version (&gt;=1.2.0) remember to use <code>--disable-gpu</code> parameter when running R-Studio or setup environment variable as mentioned in <a href="https://support.rstudio.com/hc/en-us/articles/360017886674-Troubleshooting-RStudio-Rendering-Errors" target="_blank" rel="noreferrer">Troubleshooting RStudio Rendering Errors</a>.</p></div><h3 id="configure-x2go" tabindex="-1">Configure X2Go <a class="header-anchor" href="#configure-x2go" aria-label="Permalink to &quot;Configure X2Go&quot;">​</a></h3><p>To automatically start RStudio, revisit your <em>Session preferences</em> in the <a href="/do-science/tools/technical/x2go">X2Go setup</a> and update your <em>Single application command path</em> to <code>/usr/bin/rstudio</code>and <em>Create a session icon on the desktop...</em>.</p><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p>There is a known bug in x2go <code>1.1.456</code> that will go away if you comment out (add # before) a line in the x2goagent.options:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/x2go/x2goagent.options</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># X2GO_NXAGENT_DEFAULT_OPTIONS+=&quot; -extension BIG-REQUESTS&quot;</span></span></code></pre></div></div><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><h3 id="i-cannot-create-r-tempdir" tabindex="-1">I cannot create R_TempDir <a class="header-anchor" href="#i-cannot-create-r-tempdir" aria-label="Permalink to &quot;I cannot create R_TempDir&quot;">​</a></h3><p>If your system disk is full, R will not be able to store temporary files used for computation. You may see the error message <strong><code>Fatal error: cannot create &#39;R_TempDir&#39;</code></strong>. <a href="/do-science/faq/storage#how-can-i-see-the-sizes-of-my-lab-volumes">Click here</a> to verify if the disk disk is full, and this guide to change your temp folder to a larger volume.</p><h3 id="installation-of-devtools" tabindex="-1">Installation of devtools <a class="header-anchor" href="#installation-of-devtools" aria-label="Permalink to &quot;Installation of devtools&quot;">​</a></h3><p>You may need to install some more dependencies to get <code>install.packages(&quot;devtools&quot;)</code> going:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> libcurl4-openssl-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> libssh2-1-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> libssl-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> libxml2-dev</span></span></code></pre></div><h3 id="rstudio-do-not-recognize-the-latest-r-version" tabindex="-1">RStudio do not recognize the latest R-version <a class="header-anchor" href="#rstudio-do-not-recognize-the-latest-r-version" aria-label="Permalink to &quot;RStudio do not recognize the latest R-version&quot;">​</a></h3><p>Since R versions can be installed side-by-side on a system, you may need to select which version of R you would like RStudio to use. Click the <a href="https://support.rstudio.com/hc/en-us/articles/200486138-Changing-R-versions-for-RStudio-desktop" target="_blank" rel="noreferrer">Chaning R versions for RStudio desktop</a> on the RStudio support pages for more information.</p><h3 id="predictabel-matplotlib-viridis-or-plyr-fails-to-import" tabindex="-1">PredictABEL, matplotlib, viridis, or plyr fails to import <a class="header-anchor" href="#predictabel-matplotlib-viridis-or-plyr-fails-to-import" aria-label="Permalink to &quot;PredictABEL, matplotlib, viridis, or plyr fails to import&quot;">​</a></h3><p>If running <code>library(PredictABEL)</code> in rstudio server fails with:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Error:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> package</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> or</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> load</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> failed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;PredictABEL&#39;:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> .onLoad</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> failed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> loadNamespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;tcltk&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> details:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  call:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fun</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">libname,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pkgname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  error:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (converted </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> warning</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) couldn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;t connect to display &quot;:0&quot;</span></span></code></pre></div><p>You need to install these packages related to tcl and tk:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tcl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tcl8.6</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tk-table</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tk8.6</span></span></code></pre></div><h3 id="rstudio-or-r-becomes-unresponsive-when-i-run-my-code" tabindex="-1">RStudio or R becomes unresponsive when I run my code <a class="header-anchor" href="#rstudio-or-r-becomes-unresponsive-when-i-run-my-code" aria-label="Permalink to &quot;RStudio or R becomes unresponsive when I run my code&quot;">​</a></h3><p>It might be good to check the resource consumption on your lab machine. The response may be reduced if you or your lab mates consume all memory and/or CPU. A quick way to do this is via <a href="/do-science/faq/compute#can-i-monitor-my-resource-consumption">HTOP and time</a>.</p><p>For example, if you use all your memory you might need to reduce your table sizes or upgrade your machine size. If your lab mates consume all your resources you may want to ask them to spare some for you.</p>`,70)])])}const F=i(t,[["render",l]]);export{c as __pageData,F as default};
