import{_ as o,c as i,o as n,aM as r}from"./chunks/framework.DAyGILei.js";const l="/assets/mobaxterm_main-local_terminal.BYkoFyB_.png",c="/assets/mobaxterm_local_terminal.Dz9EDMmd.png",d="/assets/mobaxterm_step5.BbXI7sRU.png",p="/assets/mktemp-error.CXBvFf10.png",h="/assets/mobaxterm_edit-session.Cr3OGg5s.png",s="/assets/mobaxterm_step1.CPXwdZl7.png",t="/assets/mobaxterm_step2.B9F74F6N.png",a="/assets/mobaxterm_step3.D6SudmBy.png",m="/assets/mobaxterm_ssh-agent-refused-operation.BUNFpv8_.png",u="/assets/putty_pageant.B7K8vKPU.png",g="/assets/mobaxterm_step4.Bntjbq76.png",k="/assets/mobaxterm_settings.BEqnEXZ2.png",y="/assets/mobaxterm_allow_mobagent.Bam0A5xY.png",b="/assets/mobaxterm_restart_settings.BP0HaTyM.png",f="/assets/mobaxterm_mobagent_add_key.BhPnazs4.png",_="/assets/1.mobaxterm-configure-custom-session.Bo6__Iwl.png",S="/assets/2.mobaxterm-configure-custom-session.qFFuNoIh.png",F="/assets/3.mobaxterm-configure-custom-session.BP1j7hSY.png",C="/assets/4.mobaxterm-configure-custom-session.DIeV6A33.png",v="/assets/5.mobaxterm-configure-custom-session.stiUSGOl.png",I=JSON.parse('{"title":"MobaXterm","description":"Usage guide for MobaXterm.","frontmatter":{"title":"MobaXterm","category":"Technical tools","permalink":"/do-science/tools/technical/mobaxterm","outline":1,"description":"Usage guide for MobaXterm."},"headers":[],"relativePath":"do-science/tools/technical/mobaxterm.md","filePath":"do-science/tools/technical/mobaxterm.md"}'),w={name:"do-science/tools/technical/mobaxterm.md"};function x(E,e,q,P,H,B){return n(),i("div",null,[...e[0]||(e[0]=[r('<h1 id="mobaxterm" tabindex="-1">MobaXterm <a class="header-anchor" href="#mobaxterm" aria-label="Permalink to &quot;MobaXterm&quot;">​</a></h1><p><strong><a href="https://mobaxterm.mobatek.net/" target="_blank" rel="noreferrer">MobaXterm</a> is an application that simplifies SSH connections to your lab from your local Windows machine.</strong></p><nav class="table-of-contents"><ul><li><a href="#_1-how-to-install">1. How to install</a></li><li><a href="#_2-generating-ssh-key">2. Generating SSH Key</a><ul><li><a href="#_2-1-open-local-terminal">2.1 Open Local terminal</a></li><li><a href="#_2-2-generate-ssh-key-in-local-terminal">2.2 Generate SSH key in local terminal</a></li><li><a href="#_2-3-upload-your-ssh-key">2.3 Upload your SSH key</a></li></ul></li><li><a href="#_3-connect">3. Connect</a></li><li><a href="#troubleshooting">Troubleshooting</a></li><li><a href="#advanced">Advanced</a></li></ul></nav><div class="warning custom-block"><p class="custom-block-title">Requirements</p><p>(1) A Windows operating system on your local computer.</p><p>(2) A working connection to your lab over SSH as described in the <a href="/do-science/lab/">Configure SSH</a> guide section of the <em>How to connect to your lab</em> guide.</p><p>(3) The IP address to your lab. This was included in your <a href="/do-science/lab/#_3-1-identify-required-info">SSH configuration file</a> that you got on email during your initial onboarding.</p><p>(4) The <a href="/do-science/lab-access/1-collect-keys#_1-2-secrets-on-your-email">MobaXterm configuration file</a> that your that you got on email during your initial onboarding.</p><p><strong>Missing the files?</strong> Worry not. You can order a new <a href="/do-science/service-desk/#ssh-configuration">SSH configuration</a> file and a new <a href="/do-science/service-desk/#mobaxterm-configuration-file">MobaXterm</a> configuration file in our do science service desk.</p></div><h2 id="_1-how-to-install" tabindex="-1">1. How to install <a class="header-anchor" href="#_1-how-to-install" aria-label="Permalink to &quot;1. How to install&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Lab users from NTNU can install MobaXterm using the software center.</p></div><p>1.1. Download the <strong><code>Home edition (installer edition)</code></strong> from <a href="https://mobaxterm.mobatek.net/download.html" target="_blank" rel="noreferrer">mobaxterm.mobatek.net</a>.</p><p>1.2. Unzip the file and install the software.</p><h2 id="_2-generating-ssh-key" tabindex="-1">2. Generating SSH Key <a class="header-anchor" href="#_2-generating-ssh-key" aria-label="Permalink to &quot;2. Generating SSH Key&quot;">​</a></h2><p>This section generates SSH keys that allow you connect to your lab without typing passwords. Jump to section 2.3 if you know you already have a SSH that you want to use.</p><h3 id="_2-1-open-local-terminal" tabindex="-1">2.1 Open Local terminal <a class="header-anchor" href="#_2-1-open-local-terminal" aria-label="Permalink to &quot;2.1 Open Local terminal&quot;">​</a></h3><p>Clicking on Local terminal button opens MobaXterm command line:</p><p><img src="'+l+'" alt="Main View - Local terminal"></p><h3 id="_2-2-generate-ssh-key-in-local-terminal" tabindex="-1">2.2 Generate SSH key in local terminal <a class="header-anchor" href="#_2-2-generate-ssh-key-in-local-terminal" aria-label="Permalink to &quot;2.2 Generate SSH key in local terminal&quot;">​</a></h3><p>When you click &quot;Start local terminal&quot;, you should see a window similar to this:</p><p><img src="'+c+'" alt="Local terminal"></p><p>2.2.1 Check if you already have a ssh keys in place by running this command in the local terminal:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">USERPROFILE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}/.ssh/id_rsa.pub&quot;</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Run the above command as is. Keep <strong><code>${USERPROFILE}</code></strong> (do -not- write your user name).</p></div><p><strong>If you see random letters, jump to section 2.3</strong></p><p>If the above command prints several rows of random letters on the screen, you already have a ssh key that can be used. Great! Jump to section 2.3.</p><p><strong>If you see no output or an error message (No such file or directory), continue here:</strong></p><p>2.2.2 Assure your <strong><code>.ssh</code></strong> directory exists by running:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">USERPROFILE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}/.ssh&quot;</span></span></code></pre></div><p>2.2.3 Create your new SSH key:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-keygen</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4096</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rsa</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">USERPROFILE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}/.ssh/id_rsa&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -q</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -N</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span></span></code></pre></div><h3 id="_2-3-upload-your-ssh-key" tabindex="-1">2.3 Upload your SSH key <a class="header-anchor" href="#_2-3-upload-your-ssh-key" aria-label="Permalink to &quot;2.3 Upload your SSH key&quot;">​</a></h3><p>2.3.1 Upload your SSH key to your lab machine.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -- Principal example</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-copy-id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">USERPROFILE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}/.ssh/id_rsa.pub&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">usernam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">entry-I</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">P</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p><strong>Note. You need to add your username and lab IP in the above command</strong>.</p><p>Replace <strong><code>&lt;username&gt;</code></strong> with your username, and replace <strong><code>&lt;entry-IP&gt;</code></strong> with your lab IP address that was included in your <a href="/do-science/lab/#_3-1-identify-required-info">ssh-config.txt file</a>. A (non-working) example of the would be: <strong><code>joedeomuser@10.42.2.32</code></strong>.</p><p><strong>Note. Do -not- save your passphrase</strong>.</p><p>You will be asked to type in your <a href="/do-science/lab/#_3-2-design-a-passphrase">SSH passphrase</a> that you made during your initial lab onboarding.</p><p>If you get asked to save your password, refuse by clicking on <strong><code>No</code></strong> to make sure that MobaXterm will authenticate with your SSH keys instead of your passphrase.</p><h2 id="_3-connect" tabindex="-1">3. Connect <a class="header-anchor" href="#_3-connect" aria-label="Permalink to &quot;3. Connect&quot;">​</a></h2><p>3.1. Locate your <strong><code>MobaXterm configuration file</code></strong> on your local computer: <strong><code>&lt;your-username&gt;.mobaxterm</code></strong>.</p><p>3.2 Click on the file for MobaXterm to pick up your lab session.</p><p><img src="'+d+'" alt="Connect"></p><p>With a little bit of luck, you should now be able to connect directly from your client computer to the home machine in your lab.</p><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><h4 id="mktemp-error" tabindex="-1">Mktemp error <a class="header-anchor" href="#mktemp-error" aria-label="Permalink to &quot;Mktemp error&quot;">​</a></h4><details class="details custom-block"><summary>More information</summary><ul><li><p>If you are getting this error when trying <strong><code>ssh-copy-id</code></strong>: <img src="'+p+'" alt="mktemp-error"></p></li><li><p>Run this command with <code>TMPDIR</code> variable:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># -- Non-working example</span></span>\n<span class="line"><span>TMPDIR=&quot;${USERPROFILE}&quot; ssh-copy-id -i &quot;${USERPROFILE}/.ssh/id_rsa.pub&quot; &lt;username&gt;@&lt;entry-IP&gt;</span></span></code></pre></div></li></ul><p><strong>Note.</strong> You need to replace <code>&lt;username&gt;</code> with your username (without the brackets), and <code>&lt;entry-IP&gt;</code> with your entry IP from the SSH config file.</p><ul><li>If permissions error still appears try this alternative approach<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>cat &quot;${USERPROFILE}/.ssh/id_rsa.pub&quot; | ssh &lt;username&gt;@&lt;entry-IP&gt; &quot;cat &gt;&gt; ~/.ssh/authorized_keys&quot;</span></span></code></pre></div></li></ul><p><strong>Note.</strong> You need to replace <code>&lt;username&gt;</code> with your username (without the brackets), and <code>&lt;entry-IP&gt;</code> with your entry IP from the SSH config file.</p></details><h4 id="check-ssh-keys-in-session-configuration" tabindex="-1">Check SSH keys in session configuration <a class="header-anchor" href="#check-ssh-keys-in-session-configuration" aria-label="Permalink to &quot;Check SSH keys in session configuration&quot;">​</a></h4><details class="details custom-block"><summary>More information</summary><ul><li>Right click on the session that you want to edit and choose option <strong><code>Edit session</code></strong>. <img src="'+h+'" alt="mobaxterm_edit-session"></li><li>Assure <strong><code>SSH</code></strong> option under the <strong><code>Session settings</code></strong> is selected.</li><li>In <strong>Advanced SSH settings</strong> make sure that private key option is checked. Then select the path to SSH key file (<strong><code>id_rsa</code></strong>). <img src="'+s+'" alt="Step 1"></li><li>Under <strong><code>Network settings</code></strong>, click on <strong><code>Connect through SSH gateway (jump host)</code></strong>. <img src="'+t+'" alt="Step 2"></li><li>Check <strong><code>Use SSH key</code></strong> option and select the path to SSH key file (<strong><code>id_rsa</code></strong>). <img src="'+a+'" alt="Step 3"></li><li>Confirm session settings by clicking <strong><code>OK</code></strong>.</li></ul></details><h4 id="agent-refused-operation" tabindex="-1">Agent refused operation <a class="header-anchor" href="#agent-refused-operation" aria-label="Permalink to &quot;Agent refused operation&quot;">​</a></h4><details class="details custom-block"><summary>More information</summary><p>If you see the error message saying: <strong><code>Agent refused operation</code></strong> you need to install Putty.</p><p><img src="'+m+'" alt="agent-refused-operation"></p><p>Once Putty is installed, make sure that MobaXterm is closed and started Pageant. Pageant is part of Putty installation.</p><p><img src="'+u+`" alt="putty_pageant"></p><p>Once Pageant is running, you can start MobaXterm.</p></details><h4 id="configure-custom-ssh-config" tabindex="-1">Configure custom SSH config <a class="header-anchor" href="#configure-custom-ssh-config" aria-label="Permalink to &quot;Configure custom SSH config&quot;">​</a></h4><details class="details custom-block"><summary>More information</summary><p>This part might be needed if you plan to use SSH tunneling to other lab machines. It is not part of the recommended workflow.</p><p>To setup ssh config to be used in local terminal of MobaXterm use:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/mobaxterm/.ssh/config</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&lt;Paste content of your ssh-config.txt here&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span></span></code></pre></div></details><h2 id="advanced" tabindex="-1">Advanced <a class="header-anchor" href="#advanced" aria-label="Permalink to &quot;Advanced&quot;">​</a></h2><h4 id="configure-custom-session" tabindex="-1">Configure custom session <a class="header-anchor" href="#configure-custom-session" aria-label="Permalink to &quot;Configure custom session&quot;">​</a></h4><details class="details custom-block"><summary>More information</summary><ul><li>Open MobaXterm</li><li>Select a new session and click on the <code>SSH</code> image on the <code>Session settings</code>.</li><li>In <strong>Basic SSH settings</strong>, add <code>10.5.5.12</code> as <code>Remote host</code> and type your username into <code>Specify username</code> field. Under <strong>Advanced SSH settings</strong> uncheck <code>X11-forwarding</code> if not used. Select ssh (private) key file if you already have one. <img src="`+s+'" alt="Step 1" title="MobaXterm - Step 1"></li><li>Under <code>Network settings</code>, click on <code>Connect through SSH gateway (jump host)</code><img src="'+t+'" alt="Step 2" title="MobaXterm - Step 2"></li><li>Add your labs IP-address to the <code>Gateway SSH server</code> and your user name to the <code>User</code> field (the 10.42.-address from the ssh-config). Select ssh (private) key file if you already have one. Click OK to confirm SSH jump host. <img src="'+a+'" alt="Step 3" title="MobaXterm - Step 3"></li><li>In <strong>Bookmark settings</strong>, Name your lab session. Click OK to confirm Session settings. <img src="'+g+'" alt="Step 4" title="MobaXterm - Step 4"></li></ul></details><h4 id="configure-mobaagent" tabindex="-1">Configure MobaAgent <a class="header-anchor" href="#configure-mobaagent" aria-label="Permalink to &quot;Configure MobaAgent&quot;">​</a></h4><details class="details custom-block"><summary>More information</summary><ol><li>Start MobaXterm and open Settings:</li></ol><p><img src="'+k+'" alt="mobaxterm_settings"></p><ol start="2"><li>Choose SSH tab and make sure that option <code>Use internal SSH agent &quot;Mobagent&quot;</code> is checked. Then click OK to save the settings.</li></ol><p><img src="'+y+'" alt="mobaxterm_allow_mobagent"></p><ol start="3"><li>If you are asked to confirm restart of MobaXterm click <code>Yes</code> to confirm.</li></ol><p><img src="'+b+'" alt="mobaxterm_restart_settings"></p><ol start="4"><li><p>(optional) if you have not setup ssh before, follow section 2 above (generating SSH key)</p></li><li><p>Add SSH key into Mobagent</p></li></ol><p>Check the list of Mobagent SSH keys and make sure that SSH key (<code>id_rsa</code> file) is included.</p><p><img src="'+f+'" alt="mobaxterm_mobagent_keys"></p><p>If MobaXterm included the new key automatically, you can continue to the next step. If your <code>SSH agents</code> list is empty, click on the plus sign (arrow marked &quot;2.&quot;) and add your new <code>id_rsa</code> file (key) to the list. You will find the file on your local computer under this path: <code>C:\\Users\\&lt;yourlocalusername&gt;\\.ssh\\id_rsa</code>.</p></details><h4 id="configure-custom-session-for-on-demand-and-blue-machines" tabindex="-1">Configure custom session for On-Demand and BLUE machines <a class="header-anchor" href="#configure-custom-session-for-on-demand-and-blue-machines" aria-label="Permalink to &quot;Configure custom session for On-Demand and BLUE machines&quot;">​</a></h4><details class="details custom-block"><summary>More information</summary><ol><li>Duplicate your current lab session</li></ol><p><img src="'+_+'" alt="Duplicate_session"></p><ol start="2"><li>Edit duplicated session (feel free to rename it as well)</li></ol><p><img src="'+S+'" alt="Edit_session"></p><ol start="3"><li>Set options as described below</li></ol><p><img src="'+F+'" alt="set_remote_host"></p><ol start="4"><li>Add jump host for home machine.</li></ol><p><img src="'+C+'" alt="edit_jump"></p><p><img src="'+v+'" alt="edit_jump_home"></p><ol start="5"><li>Save and enjoy !</li></ol></details>',55)])])}const A=o(w,[["render",x]]);export{I as __pageData,A as default};
