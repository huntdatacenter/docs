import{_ as t,c as a,o as i,aM as s}from"./chunks/framework.DAyGILei.js";const o="/assets/ekista_1.Dy06ubsD.png",n="/assets/ekista_2.CyHhtKRu.png",l="/assets/ekista_3.Drz3fyj4.png",r="/assets/ekista_4.DXqJl_N1.png",c="/assets/ekista_5.C8ifPlrZ.png",d="/assets/ekista_6.9nTm9Zaw.png",p="/assets/ekista_7._eAar28n.png",h="/assets/ekista_8.BUuUfexZ.png",u="/assets/ekista_9.C2tdwztx.png",k="/assets/ekista_10.C3yk_BTo.png",x=JSON.parse('{"title":"External kista","description":"External kistas support labs with a simple and secure way to transfer data from an external user located outside HUNT Cloud and into a lab in HUNT Cloud.","frontmatter":{"title":"External kista","category":"Data transfers","permalink":"/do-science/data-transfers/external-kista","outline":2,"description":"External kistas support labs with a simple and secure way to transfer data from an external user located outside HUNT Cloud and into a lab in HUNT Cloud."},"headers":[],"relativePath":"do-science/data-transfers/external-kista.md","filePath":"do-science/data-transfers/external-kista.md"}'),m={name:"do-science/data-transfers/external-kista.md"};function g(y,e,f,b,w,C){return i(),a("div",null,[...e[0]||(e[0]=[s('<h1 id="external-kista" tabindex="-1">External kista <a class="header-anchor" href="#external-kista" aria-label="Permalink to &quot;External kista&quot;">​</a></h1><p><strong>External kistas support labs with a trusted way to transfer data from an external user located outside HUNT Cloud and into a lab in HUNT Cloud.</strong></p><nav class="table-of-contents"><ul><li><a href="#for-external-users">For external users</a><ul><li><a href="#network-connection-to-hunt-cloud">Network connection to HUNT Cloud</a></li><li><a href="#ssh-key-pair">SSH key pair</a></li><li><a href="#sftp-client">SFTP client</a></li></ul></li><li><a href="#for-internal-users">For internal users</a></li><li><a href="#troubleshooting">Troubleshooting</a></li></ul></nav><div class="tip custom-block"><p class="custom-block-title">Note</p><p>This page describes the practical aspects of external kista transfers. Head over to our <a href="/do-science/faq/external-transfer#external-kista">External kista FAQ</a> for more information on the service itself.</p></div><h2 id="for-external-users" tabindex="-1">For external users <a class="header-anchor" href="#for-external-users" aria-label="Permalink to &quot;For external users&quot;">​</a></h2><p>This section aims to give a technical description on how external users outside HUNT Cloud can connect and transfer data to our hosted SFTP service called external kista.</p><p>In short, external kistas are short-lived and hardened <a href="https://en.wikipedia.org/wiki/SSH_File_Transfer_Protocol" target="_blank" rel="noreferrer">SFTP</a> servers dedicated to transferring data. Please <a href="/contact">contact us</a> if you require more information or run into trouble.</p><div class="warning custom-block"><p class="custom-block-title">Technical requirements</p><p>As an external user outside HUNT Cloud, you will need to meet the following technical requirements to transfer data to/from a external kista.</p><ul><li><a href="#network-connection-to-hunt-cloud">Network connection to HUNT Cloud</a></li><li><a href="#ssh-key-pair">SSH key pair</a></li><li><a href="#sftp-client">SFTP client</a></li></ul><p>All major operating systems such as Windows, MacOS and Linux are supported.</p></div><h3 id="network-connection-to-hunt-cloud" tabindex="-1">Network connection to HUNT Cloud <a class="header-anchor" href="#network-connection-to-hunt-cloud" aria-label="Permalink to &quot;Network connection to HUNT Cloud&quot;">​</a></h3><p>Your host organization might need to open it&#39;s network firewall in order for your computer to connect and transfer to the external kistas in HUNT Cloud. Below are the network details that your organizational IT department will need add such a firewall opening:</p><ul><li>External kista IP address: <code>129.241.176.121</code></li><li>Port range: <code>2000-2128</code></li><li>Protocol: <code>TCP</code></li></ul><p>We will select one specific port number during the kista deployment. This will be forwarded in the transfer information to your HUNT Cloud party when the external kista has been setup.</p><h3 id="ssh-key-pair" tabindex="-1">SSH key pair <a class="header-anchor" href="#ssh-key-pair" aria-label="Permalink to &quot;SSH key pair&quot;">​</a></h3><p>You will use a <code>SSH public key</code> to authenticate and access your kista instead of passwords. You must therefore send us such a key before we can deploy your kista. This section describes how to do this.</p><p><strong>1. Generate a SSH key pair</strong></p><p>We recommend that you create a dedicated SSH key pair for each kista transfer. Click on the section below for a step wise guide on how to generate a new key pair in Windows that you can use for your kista access.</p><details class="details custom-block"><summary>How to generate a RSA SSH key pair on Windows 10 or higher using Open SSH</summary><ol><li><p>Open new Command Prompt window (WIN + R and type cmd.exe then hit Enter).</p></li><li><p>Generate rsa key pair in default location.</p></li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ssh-keygen -q -t rsa -b 4096 -f &quot;%USERPROFILE%\\.ssh\\id_rsa&quot; -N &quot;&quot;</span></span></code></pre></div><ol start="3"><li>Copy public key. This command will save it to a new text file and place it on your desktop.</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>type %USERPROFILE%\\.ssh\\id_rsa.pub &gt; %USERPROFILE%\\Desktop\\ekista_pubkey.txt</span></span></code></pre></div><ol start="4"><li>Share the <code>ekista_pubkey.txt</code> to your HUNT Cloud contact.</li></ol></details><details class="details custom-block"><summary>How to generate a RSA SSH key pair on OS X, macOS and Ubuntu</summary><ol><li><p>Open new Terminal</p></li><li><p>Generate a new dedicated RSA key pair.</p></li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-keygen</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -q</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rsa</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4096</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_rsa</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -N</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span></span></code></pre></div><ol start="3"><li>Copy the id_rsa key to your downloads directory.</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/ekista.pub</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/Downloads/ekista_pubkey.txt</span></span></code></pre></div><ol start="4"><li>Share the <code>ekista_pubkey.txt</code> to your HUNT Cloud contact.</li></ol></details><details class="details custom-block"><summary>Accepted key types</summary><p>We accept the following public key types:</p><ul><li>RSA</li><li>ECDSA</li><li>Ed25519</li></ul></details><p><strong>2. Share public SSH key with HUNT Cloud</strong></p><p>After generating the SSH key pair, please share the <strong>public key</strong> (not the private one) with us. Send your new public key <code>ekista_pubkey.txt</code> as an email attachment to your HUNT Cloud contact that can forward your key to us as an attachment in their service order.</p><h3 id="sftp-client" tabindex="-1">SFTP client <a class="header-anchor" href="#sftp-client" aria-label="Permalink to &quot;SFTP client&quot;">​</a></h3><p>You will need a SFTP client to connect and transfer data to the external kista. For Windows, we recommend the WinSCP client. OS X, macOS and Ubuntu can use built in command line tools.</p><p>In addition to the SFTP software, you will need the external kista transfer information shipped by HUNT Cloud on the time of deployment to be able to connect.</p><div class="tip custom-block"><p class="custom-block-title">Access information from HUNT Cloud</p><p>You will need the following information from HUNT Cloud to connect to your kista:</p><ul><li><code>Host name</code></li><li><code>Port number</code></li><li><code>User name</code></li></ul></div><p>Below is a guide on how to connect using the WinSCP SFTP client on Windows.</p><details class="details custom-block"><summary>How to connect to an external kista on Windows with WinSCP</summary><ol><li>In <code>WinSCP</code>: <ul><li>Click <code>New Session</code></li></ul></li></ol><p><img src="'+o+'" alt="ekista_7" title="ekista_7"></p><ol start="2"><li>In the <code>Login</code> window: <ul><li>Enter <code>ekista.hdc.ntnu.no</code> as <code>Host name</code></li><li>Enter the port number from the transfer information as <code>Port number</code> (the number in the example will not work).</li><li>Enter the user name from the transfer information as <code>User name</code> (the name in the example will not work).</li><li>Click <code>Advanced</code></li></ul></li></ol><p><img src="'+n+'" alt="ekista_7" title="ekista_7"></p><ol start="3"><li>In the <code>Advanced Site Settings</code> window: <ul><li>Select the <code>Authentication</code> page in the sidebar</li><li>Uncheck the <code>Attempt &#39;keyboard-interactive&#39; authentication</code> checkbox</li><li>Enter the location of the <code>Private key file</code>. If you followed the previous guide, then this should be the location of the <code>ekista</code> private key file.</li><li>Click <code>OK</code></li></ul></li></ol><p><img src="'+l+'" alt="ekista_8" title="ekista_8"></p><ol start="4"><li>In the <code>Login</code> window: <ul><li>Click <code>Save</code></li></ul></li></ol><p><img src="'+r+'" alt="ekista_9" title="ekista_9"></p><ol start="5"><li>In the <code>Save session as site</code> window: <ul><li>Choose a <code>Site name</code> if required, combining the <code>User name</code> and <code>Host name</code> (the site name given in the example will not work).</li><li>Click <code>OK</code></li></ul></li></ol><p><img src="'+c+'" alt="ekista_10" title="ekista_10"></p><ol start="6"><li>In the <code>Login</code> window: <ul><li>Click <code>Login</code></li></ul></li></ol><p><img src="'+d+'" alt="ekista_11" title="ekista_11"></p><ol start="7"><li>In the <code>Warning</code> window: <ul><li>Compare and verify that the appropriate <code>SHA-256 key fingerprint</code> from the transfer information matches</li><li>Click <code>Yes</code></li></ul></li></ol><p><img src="'+p+'" alt="ekista_12" title="ekista_12"></p><ol start="8"><li>In the <code>Authentication Banner</code> window: <ul><li>Read the information banner to ensure you are connecting to correct kista</li><li>Click <code>Continue</code></li></ul></li></ol><p><img src="'+h+'" alt="ekista_13" title="ekista_13"></p><ol start="9"><li>In the <code>Key passphrase</code> window: <ul><li>Enter the passphrase for your private key. If you followed the previous guide, this should be the <code>ekista.ppk</code> key and passphrase that you set during the generation in the <a href="#ssh-key">SSH key pair</a> section above.</li><li>Click <code>OK</code></li></ul></li></ol><p><img src="'+u+'" alt="ekista_13" title="ekista_13"></p><ol start="10"><li>In <code>WinSCP</code>:</li></ol><ul><li>You should now be connect to the SFTP server</li><li>Upload data in the <code>upload</code> directory</li></ul><p><img src="'+k+`" alt="ekista_13" title="ekista_13"></p></details><details class="details custom-block"><summary>How to connect to an external kista on OS X, macOS and Ubuntu</summary><p>You can connect to the kista from your local computer using the built in SFTP tool.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -- principal example</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sftp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -oPort=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">port-number</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">usernam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@ekista.hdc.ntnu.no</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -- practical example</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sftp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -oPort=2124</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> johndoe-importer@ekista.hdc.ntnu.no</span></span></code></pre></div><p>Once logged in you can follow the examples from our <a href="/do-science/data-transfers/internal-kista">internal kista guide</a> for <a href="/do-science/data-transfers/internal-kista#upload">upload</a> or <a href="/do-science/data-transfers/internal-kista#download">download</a> of data.</p></details><h2 id="for-internal-users" tabindex="-1">For internal users <a class="header-anchor" href="#for-internal-users" aria-label="Permalink to &quot;For internal users&quot;">​</a></h2><p>Follow the examples from our <a href="/do-science/data-transfers/internal-kista">internal kista guide</a>.</p><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><h4 id="cannot-connect-to-external-kista" tabindex="-1">Cannot connect to external kista <a class="header-anchor" href="#cannot-connect-to-external-kista" aria-label="Permalink to &quot;Cannot connect to external kista&quot;">​</a></h4><ol><li><p>Confirm that you are using correct key to authenticate (based on guide above).</p></li><li><p>If correct key is used, there are few things that could be an issue.</p></li></ol><ul><li><p>connection is blocked by firewalls (organisational or on your local computer/virtual machine)</p></li><li><p>misconfiguration on HUNT Cloud side</p></li></ul><ol start="3"><li>To get the correct idea on what could be an issue, you can share <code>nmap</code> or <code>traceroute</code> logs with HUNT Cloud in communication email</li></ol><details class="details custom-block"><summary>Nmap</summary><p>This is a faster way to get results out of traceroute.</p><ol><li>Download and install nmap from official website.</li></ol><p><a href="https://nmap.org/download.html" target="_blank" rel="noreferrer">https://nmap.org/download.html</a></p><ol start="2"><li>Run below code in command prompt or terminal (change port to match the one for your ekista transfer).</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>nmap -Pn --traceroute -p &lt;port number&gt;  ekista.hdc.ntnu.no</span></span></code></pre></div><ol start="3"><li>Share output in communication email with HUNT Cloud.</li></ol></details><details class="details custom-block"><summary>Traceroute</summary><ol><li>Run below code in command prompt or terminal (this might take a while)</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>traceroute -P TCP -p &lt;port number&gt; ekista.hdc.ntnu.no</span></span></code></pre></div><p><em>Note</em>: on linux or macOS machines, you might need sudo permission.</p><ol start="2"><li>Share output in communication email with HUNT Cloud.</li></ol></details>`,37)])])}const F=t(m,[["render",g]]);export{x as __pageData,F as default};
